(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){},135:function(e,t,c){},136:function(e,t,c){},137:function(e,t,c){},138:function(e,t,c){},139:function(e,t,c){},140:function(e,t,c){},141:function(e,t,c){},142:function(e,t,c){},143:function(e,t,c){},144:function(e,t,c){},145:function(e,t,c){},146:function(e,t,c){},147:function(e,t,c){},148:function(e,t,c){},149:function(e,t,c){},150:function(e,t,c){},151:function(e,t,c){"use strict";c.r(t);var s,n,a=c(1),i=c.n(a),r=c(30),l=c.n(r),o=c(6),j=c(2),d=c(12),u=c.n(d),m=401,b=null!==(s=localStorage.getItem("token"))&&void 0!==s?s:"",O=function(e){var t=u.a.create({baseURL:"/",timeout:5e3,headers:{"x-token":b}});return t.interceptors.response.use((function(e){return e}),(function(t){throw t.response.status===m&&e(),t})),t},x="user/requiredAuthorization",p="user/logout",h="user/redirectToRoute",v="user/setUser",_="user/setUserLocation",N="user/setInventory",f="room/setRoomBD",y="room/setOnlineUsers",g="inventory/getInventory",k=Object(o.b)(x,(function(e){return{payload:e}})),E=Object(o.b)(p),S=Object(o.b)(_,(function(e){return{payload:e}})),I=Object(o.b)(v,(function(e){return{payload:e}})),w=Object(o.b)(N,(function(e){return{payload:e}})),C=Object(o.b)(f,(function(e){return{payload:e}})),R=Object(o.b)(y,(function(e){return{payload:e}})),q=Object(o.b)(h,(function(e){return{payload:e}})),M=Object(o.b)(g,(function(e){return{payload:e}})),T="AUTH",A="NO_AUTH",L="UNKNOWN",U="/",D="/registration",J="/login",G="/profile",B="/store",H="/room-1",W="/room-2",z="6111901e25947259b089bdb7",P="6111911625947259b089bdcf",F="6117a719dfd13508c4f026be",V="6111912325947259b089bdd3",K="6111912a25947259b089bdd7",Y=c(20),Q=c(13),X={authorizationStatus:L,id:null,name:"",inventory:[],location:""},Z=Object(o.c)(X,(function(e){e.addCase(k,(function(e,t){e.authorizationStatus=t.payload})).addCase(S,(function(e,t){e.location=t.payload})).addCase(E,(function(e){e.authorizationStatus=A})).addCase(I,(function(e,t){var c=t.payload[0];c?(e.id=c._id,e.name=c.login):console.log("\u044e\u0437\u0435\u0440\u0430 \u043d\u0435\u0442")})).addCase(w,(function(e,t){var c=t.payload;c?e.inventory=c:console.log("\u0438\u043d\u0432\u0435\u0440\u043d\u0442\u0430\u0440\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d")}))})),$=Object(o.c)({chosenItem:{}},(function(e){e.addCase(M,(function(e,t){e.chosenItem=t.payload}))})),ee=Object(o.c)({rooms:[]},(function(e){e.addCase(C,(function(e,t){e.rooms=t.payload})).addCase(R,(function(e,t){e.onlineUsers=t.payload}))})),te="USER",ce="INVENTORY",se="ROOM",ne=Object(Q.b)((n={},Object(Y.a)(n,te,Z),Object(Y.a)(n,ce,$),Object(Y.a)(n,se,ee),n)),ae=c(8),ie=c(5),re=c(4),le=c.n(re),oe=c(7),je=function(e){return e[te].authorizationStatus},de=function(e){return e[te]},ue=function(e){return e===L},me=function(){console.log("logout"),localStorage.removeItem("userData"),k(A)};var be=c(68),Oe=c.n(be)()(),xe=(c(127),c(0)),pe=function(e){var t=e.user,c=e.roomId,s=e.isMainPage,n=Object(j.c)(je),i=Object(j.b)(),r=Object(ie.f)(),l=function(){var e=Object(oe.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(me),Oe.emit("USER_LEAVE",t),r.push(U),window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=Object(a.useCallback)((function(){Oe.emit("ROOM:RELOCATION",{user:t,roomId:c})}),[c,t]);return n===A?Object(xe.jsxs)("div",{className:"navbar",children:[Object(xe.jsx)(ae.b,{to:U,className:"navbar__logo",onClick:o,children:Object(xe.jsxs)("div",{className:"stage",children:[Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"})]})}),Object(xe.jsx)("div",{className:"glitch-btn-container",children:Object(xe.jsxs)(ae.b,{to:D,className:"glitch-btn",onClick:o,children:[Object(xe.jsxs)("div",{className:"text",children:["\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f",Object(xe.jsx)("span",{className:"hidden",children:"\xa0"})]}),Object(xe.jsx)("div",{className:"mask mask1",children:Object(xe.jsx)("span",{children:"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"})}),Object(xe.jsx)("div",{className:"mask mask2",children:Object(xe.jsx)("span",{children:"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"})}),Object(xe.jsx)("div",{className:"mask mask3",children:Object(xe.jsx)("span",{children:"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"})})]})}),Object(xe.jsx)("div",{className:"glitch-btn-container glitch-btn-container--enter",children:Object(xe.jsxs)(ae.b,{to:J,className:"glitch-btn",onClick:o,children:[Object(xe.jsxs)("div",{className:"text",children:["\u0412\u0425\u041e\u0414",Object(xe.jsx)("span",{className:"hidden",children:"\xa0"})]}),Object(xe.jsx)("div",{className:"mask mask1",children:Object(xe.jsx)("span",{children:"\u0412\u0425\u041e\u0414"})}),Object(xe.jsx)("div",{className:"mask mask2",children:Object(xe.jsx)("span",{children:"\u0412\u0425\u041e\u0414"})}),Object(xe.jsx)("div",{className:"mask mask3",children:Object(xe.jsx)("span",{children:"\u0412\u0425\u041e\u0414"})})]})})]}):Object(xe.jsxs)("div",{className:"navbar",children:[s&&Object(xe.jsx)("div",{to:U,className:"navbar__logo",children:Object(xe.jsxs)("div",{className:"stage",children:[Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"})]})}),!s&&Object(xe.jsx)(ae.b,{to:U,className:"navbar__logo",onClick:o,children:Object(xe.jsxs)("div",{className:"stage",children:[Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"}),Object(xe.jsx)("div",{className:"layer"})]})}),Object(xe.jsx)("div",{className:"avatar",children:Object(xe.jsx)("div",{className:"cabinet-btn-body",children:Object(xe.jsx)(ae.b,{to:G,className:"cabinet-btn",onClick:o,children:Object(xe.jsx)("img",{className:"cabinet-btn-avatar",src:"img/avatar.jpg",alt:"\u0430\u0432\u0430\u0442\u0430\u0440"})})})}),Object(xe.jsx)("div",{className:"avatar avatar--store",children:Object(xe.jsx)("div",{className:"cabinet-btn-body",children:Object(xe.jsx)(ae.b,{to:B,className:"cabinet-btn cabinet-btn--store",onClick:o,children:Object(xe.jsx)("img",{className:"cabinet-btn-avatar",src:"img/store-avatar.png",alt:"\u0430\u0432\u0430\u0442\u0430\u0440"})})})}),Object(xe.jsx)("div",{className:"glitch-btn-container",children:Object(xe.jsxs)(ae.b,{to:"#",className:"glitch-btn",onClick:l,children:[Object(xe.jsxs)("div",{className:"text",children:["\u0412\u042b\u0419\u0422\u0418",Object(xe.jsx)("span",{className:"hidden",children:"\xa0"})]}),Object(xe.jsx)("div",{className:"mask mask1",children:Object(xe.jsx)("span",{children:"\u0412\u042b\u0419\u0422\u0418"})}),Object(xe.jsx)("div",{className:"mask mask2",children:Object(xe.jsx)("span",{children:"\u0412\u042b\u0419\u0422\u0418"})}),Object(xe.jsx)("div",{className:"mask mask3",children:Object(xe.jsx)("span",{children:"\u0412\u042b\u0419\u0422\u0418"})})]})})]})},he=(c(133),c(134),function(){return Object(xe.jsxs)("div",{className:"loader-container",children:[Object(xe.jsxs)("div",{className:"wrapper",children:[Object(xe.jsx)("div",{className:"circle circle-1"}),Object(xe.jsx)("div",{className:"circle circle-1a"}),Object(xe.jsx)("div",{className:"circle circle-2"}),Object(xe.jsx)("div",{className:"circle circle-3"})]}),Object(xe.jsx)("h1",{children:"Loading\u2026"})]})}),ve=function(e){return e[se].rooms},_e=function(e){var t=e.user,c=Object(j.c)(je),s=z,n=function(e){var t=0;return e.forEach((function(e){t+=e.online_users.length})),t}(Object(j.c)(ve)),i=Object(j.b)(),r=Object(a.useCallback)((function(){Oe.emit("ROOM:RELOCATION",{user:t,roomId:s})}),[s,t]),l=function(){var e=Object(oe.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{u.a.post("api/room/add-room",{name:"STORE"}).then((function(e){console.log(e)}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t.id&&Oe.emit("ROOM:JOIN",{user:t,roomId:s})}),[t.id,s,t]),Object(a.useEffect)((function(){t.id&&Oe.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&Oe.on("SEND_NEW_ROOMS",(function(e){i(C(e))}))}),[t.id,i]),Object(a.useEffect)((function(){t.id&&Oe.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]),ue(c)?Object(xe.jsx)(he,{}):c===T?Object(xe.jsxs)("div",{className:"page-main",children:[Object(xe.jsx)(pe,{user:t,roomId:s,isMainPage:!0}),Object(xe.jsx)("div",{className:"page-main__navigation navigation",children:Object(xe.jsx)("div",{className:"navigation__panel",children:Object(xe.jsxs)("div",{className:"navigation__info info",children:[Object(xe.jsx)("p",{className:"info__name",children:"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a: ".concat(t.name)}),Object(xe.jsx)("p",{className:"info__statistic",children:"\u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u043e\u043d\u043b\u0430\u0439\u043d: ".concat(n)})]})})}),Object(xe.jsxs)("div",{className:"page-main__inner",children:[Object(xe.jsxs)("section",{className:"page-main__rooms",children:[Object(xe.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043c\u043d\u0430\u0442:"}),Object(xe.jsxs)("ul",{className:"page-main__rooms__list",children:[Object(xe.jsx)("li",{className:"page-main__rooms__item",children:Object(xe.jsx)(ae.b,{to:"/room-1",className:"page-main__rooms__button",type:"button",onClick:r,children:"\u0412 \u043a\u043e\u043c\u043d\u0430\u0442\u0443 1"})}),Object(xe.jsx)("li",{className:"page-main__rooms__item",children:Object(xe.jsx)(ae.b,{to:"/room-2",className:"page-main__rooms__button",type:"button",onClick:r,children:"\u0412 \u043a\u043e\u043c\u043d\u0430\u0442\u0443 2"})}),"Bronepuh"===t.name&&Object(xe.jsx)("li",{className:"page-main__rooms__item",children:Object(xe.jsx)("button",{className:"page-main__button",type:"button",onClick:l,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"})})]})]}),Object(xe.jsx)("section",{className:"page-main__promo promo",children:Object(xe.jsx)("div",{className:"promo__picture",children:Object(xe.jsx)("img",{src:"img/poker-table-bg.png",alt:"\u043f\u0440\u043e\u043c\u043e"})})})]})]}):Object(xe.jsxs)("div",{className:"page-main",children:[Object(xe.jsx)(pe,{roomId:s,isMainPage:!0}),Object(xe.jsx)("div",{className:"page-main__navigation navigation",children:Object(xe.jsx)("div",{className:"navigation__panel",children:Object(xe.jsxs)("div",{className:"navigation__info info",children:[Object(xe.jsx)("p",{className:"info__name",children:"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a: \u041d\u0435\u043e\u043f\u043e\u0437\u043d\u0430\u043d\u043d\u044b\u0439 \u0415\u043d\u043e\u0442"}),Object(xe.jsx)("p",{className:"info__statistic",children:"\u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u043e\u043d\u043b\u0430\u0439\u043d: ".concat(n)})]})})})]})},Ne=c(23),fe=c(19),ye=(c(135),c(70)),ge=function(e){var t=e.login,c=e.email,s=e.password;return function(){var e=Object(oe.a)(le.a.mark((function e(n,a,i){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={login:t,email:c,password:s},console.log("api",t,c,s),e.prev=2,console.log("api",t,c,s),e.next=6,i.post("/api/auth/registration",Object(Ne.a)({},r),{headers:{"Content-Type":"application/json"}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,c,s){return e.apply(this,arguments)}}()},ke=function(e){var t=e.pageName,c=Object(a.useRef)(),s=Object(a.useState)({login:"",email:"",password:""}),n=Object(fe.a)(s,2),i=n[0],r=n[1],l=Object(j.c)(je),o=Object(j.b)(),d=function(){r({login:"",email:"",password:""})},u=function(e){r(Object(Ne.a)(Object(Ne.a)({},i),{},Object(Y.a)({},e.target.name,function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))}(e.target.value))))},m=function(){var e=Object(oe.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(i),i.login.length){e.next=5;break}return c.current.textContent="\u043b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",c.current.style="color: #880000",e.abrupt("return",console.log("\u043d\u0435\u0442 \u043b\u043e\u0433\u0438\u043d\u0430!"));case 5:o(ge(i)),d();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){!function(){var e=document.querySelectorAll(".styled-input__placeholder-text"),t=document.querySelectorAll(".styled-input__input");if(e&&t){var c=function(e,t){var c=t?"add":"remove",s=e.querySelectorAll(".letter");s=[].slice.call(s,0),t||(s=s.reverse()),s.forEach((function(s,n){setTimeout((function(){var n=e.classList.contains("filled");t&&!n||!t&&n||s.classList[c]("active")}),50*n)}))};e.forEach((function(e,t){var c,s=e.innerText,n="",a=Object(ye.a)(s);try{for(a.s();!(c=a.n()).done;){var i=c.value;s||(s="&nbsp;"),n+='<span class="letter">'.concat(i,"</span>")}}catch(r){a.e(r)}finally{a.f()}e.innerHTML=n})),t.forEach((function(e){var t=e.parentNode;e.addEventListener("focus",(function(){t.classList.add("filled"),c(t,!0)}),!1),e.addEventListener("blur",(function(){e.value.length||(t.classList.remove("filled"),c(t,!1))}),!1)})),setTimeout((function(){document.body.classList.add("on-start")}),100),setTimeout((function(){document.body.classList.add("document-loaded")}),1800)}}()}),[]),Object(xe.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault()},children:[Object(xe.jsx)("div",{className:"form__cover"}),Object(xe.jsx)("div",{className:"form__loader",children:Object(xe.jsx)("div",{className:"spinner active",children:Object(xe.jsx)("svg",{className:"spinner__circular",viewBox:"25 25 50 50",children:Object(xe.jsx)("circle",{className:"spinner__path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"4",strokeMiterlimit:"10"})})})}),Object(xe.jsxs)("div",{className:"form__content",children:["reg"===t&&Object(xe.jsx)("h1",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),"reg"!==t&&Object(xe.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),"reg"===t&&Object(xe.jsxs)("div",{className:"styled-input",children:[Object(xe.jsx)("input",{type:"text",className:"styled-input__input",name:"login",min:"2",max:"15",onChange:u,value:i.value,required:!0}),Object(xe.jsx)("div",{ref:c,className:"styled-input__placeholder",children:Object(xe.jsx)("span",{className:"styled-input__placeholder-text",children:"\u041b\u043e\u0433\u0438\u043d"})}),Object(xe.jsx)("div",{className:"styled-input__circle"})]}),Object(xe.jsxs)("div",{className:"styled-input",children:[Object(xe.jsx)("input",{type:"email",className:"styled-input__input",name:"email",onChange:u,value:i.value,required:!0}),Object(xe.jsx)("div",{className:"styled-input__placeholder",children:Object(xe.jsx)("span",{className:"styled-input__placeholder-text",children:"\u0412\u0430\u0448\u0430\xa0\u043f\u043e\u0447\u0442\u0430"})}),Object(xe.jsx)("div",{className:"styled-input__circle"})]}),Object(xe.jsxs)("div",{className:"styled-input",children:[Object(xe.jsx)("input",{type:"password",className:"styled-input__input",name:"password",min:"2",max:"100",onChange:u,value:i.value,required:!0}),Object(xe.jsx)("div",{className:"styled-input__placeholder",children:Object(xe.jsx)("span",{className:"styled-input__placeholder-text",children:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(xe.jsx)("div",{className:"styled-input__circle"})]}),"reg"===t&&Object(xe.jsx)(ae.b,{to:J,type:"button",className:"styled-button",onClick:m,children:Object(xe.jsxs)("span",{className:"styled-button__real-text-holder",children:[Object(xe.jsx)("span",{className:"styled-button__real-text",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(xe.jsx)("span",{className:"styled-button__moving-block face",children:Object(xe.jsx)("span",{className:"styled-button__text-holder",children:Object(xe.jsx)("span",{className:"styled-button__text",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})}),Object(xe.jsx)("span",{className:"styled-button__moving-block back",children:Object(xe.jsx)("span",{className:"styled-button__text-holder",children:Object(xe.jsx)("span",{className:"styled-button__text",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})})]})}),"auth"===t&&"AUTH"!==l&&Object(xe.jsx)("button",{type:"button",className:"styled-button",onClick:function(){o(function(e){var t=e.login,c=e.email,s=e.password;return function(){var e=Object(oe.a)(le.a.mark((function e(n,a,i){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={login:t,email:c,password:s},e.prev=1,e.next=4,i.post("api/auth/login",Object(Ne.a)({},r),{headers:{"Content-Type":"application/json"}}).then((function(e){localStorage.setItem("userData",JSON.stringify({userLogin:e.data.userLogin,userId:e.data.userId,token:e.data.token}));var t=e.data;n(I(t))})).then((function(){n(k(T)),n(q(U)),window.location.reload()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,c,s){return e.apply(this,arguments)}}()}(i)),d()},children:Object(xe.jsxs)("span",{className:"styled-button__real-text-holder",children:[Object(xe.jsx)("span",{className:"styled-button__real-text",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(xe.jsx)("span",{className:"styled-button__moving-block face",children:Object(xe.jsx)("span",{className:"styled-button__text-holder",children:Object(xe.jsx)("span",{className:"styled-button__text",children:"\u0412\u043e\u0439\u0442\u0438"})})}),Object(xe.jsx)("span",{className:"styled-button__moving-block back",children:Object(xe.jsx)("span",{className:"styled-button__text-holder",children:Object(xe.jsx)("span",{className:"styled-button__text",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})})]})]})},Ee=(c(136),function(){var e=Object(j.c)(je);return ue(e)?Object(xe.jsx)(he,{}):Object(xe.jsxs)("div",{className:"page-auth",children:[Object(xe.jsx)(pe,{}),Object(xe.jsx)(ke,{pageName:"auth"})]})}),Se=(c(137),function(){return Object(xe.jsxs)("div",{className:"page-reg",children:[Object(xe.jsx)(pe,{}),Object(xe.jsx)(ke,{pageName:"reg"})]})}),Ie=(c(138),c(139),c(140),c(141),function(e){var t=e.item,c=Object(j.b)(),s=function(){c(M(t))},n=function(){};return t.isActive?Object(xe.jsxs)("li",{className:"inventory__item inventory__item--active",tabIndex:"0",onFocus:s,onBlur:n,children:[Object(xe.jsxs)("div",{className:"inventory__item-inner",children:[Object(xe.jsx)("p",{className:"inventory__item-title",children:t.title}),Object(xe.jsx)("img",{className:"inventory__item-picture",src:"img/underpants.png",alt:""})]}),Object(xe.jsx)("div",{className:"inventory__item-cloth",children:Object(xe.jsx)("img",{className:"inventory__item-cloth-picture",src:"img/underpants.png",alt:""})})]}):Object(xe.jsxs)("li",{className:"inventory__item",tabIndex:"0",onFocus:s,onBlur:n,children:[Object(xe.jsxs)("div",{className:"inventory__item-inner",children:[Object(xe.jsx)("p",{className:"inventory__item-title",children:t.title}),Object(xe.jsx)("img",{className:"inventory__item-picture",src:"img/underpants.png",alt:""})]}),Object(xe.jsx)("div",{className:"inventory__item-cloth",children:Object(xe.jsx)("img",{className:"inventory__item-cloth-picture",src:"img/underpants.png",alt:""})})]})}),we=(c(142),function(e){var t=e.inventory;return e.isStore?Object(xe.jsx)("ul",{className:"inventory__list inventory__list--store",children:t.map((function(e,t){return Object(xe.jsx)(Ie,{item:e},t)}))}):Object(xe.jsx)("ul",{className:"inventory__list",children:t.map((function(e,t){return Object(xe.jsx)(Ie,{item:e},t)}))})}),Ce=(c(143),function(e){return e[ce].chosenItem}),Re=(c(144),function(){return Object(xe.jsxs)("div",{className:"inventory__promo-equipment equipment",children:[Object(xe.jsx)("div",{className:"equipment__picture",children:Object(xe.jsx)("img",{src:"img/siluet.png",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})}),Object(xe.jsxs)("ul",{className:"equipment__list",children:[Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})}),Object(xe.jsx)("li",{className:"equipment__item",children:Object(xe.jsx)("div",{className:"equipment__item-inner"})})]})]})}),qe=function(e){var t=e.user,c=e.getInventory,s=Object(j.c)(Ce),n=Object(j.b)(),a=function(){var e=Object(oe.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s._id,e.prev=1,e.next=4,u.a.delete("/api/inventory/delete/".concat(t)).then((function(e){n(M({})),c()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(oe.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s._id,e.prev=1,e.next=4,u.a.put("/api/inventory/active/".concat(t),{id:t}).then((function(e){console.log(e),n(M({})),c()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return s._id?Object(xe.jsxs)("div",{className:"inventory__promo",children:[Object(xe.jsxs)("div",{className:"inventory__promo-settings",children:[Object(xe.jsx)("p",{className:"inventory__promo-title",children:s.title}),Object(xe.jsx)("p",{className:"inventory__promo-description",children:s.description}),Object(xe.jsx)("ul",{className:"inventory__promo-list",children:s.power.map((function(e,t){var c=Object.keys(e)[0];return Object(xe.jsxs)("li",{className:"inventory__promo-item",children:[c,Object(xe.jsx)("span",{className:"inventory__promo-power",children:"+ ".concat(e[c])})]},t)}))}),Object(xe.jsx)("button",{className:"inventory__promo-delete",onClick:a,children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(xe.jsx)("button",{className:"inventory__promo-put-on",onClick:i,children:"".concat(s.isActive?"\u0441\u043d\u044f\u0442\u044c":"\u043e\u0434\u0435\u0442\u044c")})]}),Object(xe.jsx)(Re,{})]}):Object(xe.jsxs)("div",{className:"inventory__promo",children:[Object(xe.jsx)("div",{className:"inventory__promo-settings",children:Object(xe.jsx)("p",{className:"inventory__promo-title",children:t.name})}),Object(xe.jsx)(Re,{})]})},Me=function(e){var t=e.user,c=P,s=Object(a.useState)([]),n=Object(fe.a)(s,2),i=n[0],r=n[1],l=Object(j.b)(),o=t.id;Object(a.useEffect)((function(){t.id&&(Oe.emit("ROOM:JOIN",{user:t,roomId:c}),Oe.emit("GET_ROOMS"))}),[t.id,c,t]),Object(a.useEffect)((function(){t.id&&Oe.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&Oe.on("SEND_NEW_ROOMS",(function(e){l(C(e))}))}),[t.id,l]),Object(a.useEffect)((function(){t.id&&Oe.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]);var d=Object(a.useCallback)(Object(oe.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/inventory",{params:o}).then((function(e){var t=e.data;l(w(t)),r(t)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[l,o]);return Object(a.useEffect)((function(){d()}),[d]),t?Object(xe.jsxs)("div",{className:"page-user",children:[Object(xe.jsx)(pe,{user:t,roomId:c}),Object(xe.jsxs)("div",{className:"page-user__inventory inventory",children:[Object(xe.jsx)(we,{inventory:i}),Object(xe.jsx)(qe,{user:t,getInventory:d})]})]}):Object(xe.jsx)(he,{})},Te=(c(145),function(e){var t=e.user;return t?Object(xe.jsx)("li",{className:"connection__item",children:t.name}):null}),Ae=(c(146),function(e){var t=e.room;return t?Object(xe.jsxs)("section",{className:"page-room__connection connection",children:[Object(xe.jsx)("h2",{className:"connection__title",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435:"}),Object(xe.jsx)("ul",{className:"connection__list",children:t.online_users.map((function(e){return Object(xe.jsx)(Te,{user:e},e.id)}))})]}):Object(xe.jsxs)("section",{className:"page-room__connection connection",children:[Object(xe.jsx)("h2",{className:"connection__title",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435:"}),Object(xe.jsx)("ul",{className:"connection__list",children:Object(xe.jsx)(Te,{})})]})}),Le=(c(147),c(148),function(e){var t=e.user,c=e.roomId,s=Object(a.useState)({}),n=Object(fe.a)(s,2),i=n[0],r=n[1];Object(a.useEffect)((function(){i.length&&function(){var e=document.querySelector(".chat__list");e.scrollTop=e.scrollHeight}()}),[i.length]);Object(a.useEffect)((function(){t.id&&Oe.emit("GET_MESSAGES",c)}),[t.id,c]),Oe.on("MESSAGE_CREATED",(function(e){r(e)}));return Object(xe.jsxs)("section",{className:"chat",children:[Object(xe.jsx)("h3",{className:"chat__title",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: "}),Object(xe.jsx)("div",{className:"chat__list-wrapper",children:Object(xe.jsx)("ul",{className:"chat__list",children:i.length>0&&i.map((function(e,t){return Object(xe.jsxs)("li",{className:"chat__item",children:[Object(xe.jsx)("div",{className:"chat__avatar",children:e.author}),Object(xe.jsx)("div",{className:"chat__message",children:Object(xe.jsx)("p",{className:"chat__text",children:e.msg})})]},t)}))})}),Object(xe.jsxs)("form",{className:"chat__form",onSubmit:function(e){e.preventDefault();var s=document.querySelector(".chat__textarea");t.id&&Oe.emit("SEND_MESSAGE",{roomId:c,author:t.name,msg:e.target[0].value}),s.value=""},children:[Object(xe.jsx)("textarea",{className:"chat__textarea",type:"text"}),Object(xe.jsx)("button",{className:"chat__btn",type:"submit",children:"ok"})]}),"Bronepuh"===t.name&&Object(xe.jsx)("button",{className:"chat__message",onClick:function(){Oe.emit("CLEAR_MSG",c),Oe.emit("GET_MESSAGES",c),r([])},children:"clear messages"})]})}),Ue=function(e){var t=e.user,c=e.roomId,s=Object(j.c)(ve),n=null;s.length&&(n=s.find((function(e){return e.room_id===c})));var i=Object(j.b)();return Object(a.useEffect)((function(){t.id&&(Oe.emit("ROOM:JOIN",{user:t,roomId:c}),Oe.emit("GET_ROOMS"))}),[t.id,c,t]),Object(a.useEffect)((function(){t.id&&Oe.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&Oe.on("SEND_NEW_ROOMS",(function(e){i(C(e))}))}),[t.id,i]),Object(a.useEffect)((function(){t.id&&Oe.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]),Object(xe.jsxs)("div",{className:"page-room",children:[Object(xe.jsx)(pe,{user:t,roomId:c}),Object(xe.jsxs)("div",{className:"page-room__inner",children:[Object(xe.jsx)(Le,{user:t,roomId:c}),Object(xe.jsx)(Ae,{room:n})]})]})},De=c(71),Je=Object(De.a)(),Ge=(c(149),function(e){var t=e.user,c=P,s=Object(a.useState)([]),n=Object(fe.a)(s,2),i=n[0],r=n[1],l=Object(j.b)(),o=t.id,d={owner:o,title:"\u043a\u0440\u0430\u0441\u043d\u044b\u0435 \u0442\u0440\u0443\u0441\u0435\u043b\u044f",description:"\u042d\u0442\u0438 \u043b\u0435\u0433\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439 \u0442\u0440\u0443\u0441\u0435\u043b\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u043e\u0434\u0435\u0436\u0434\u044b \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0438\u0433\u0440\u044b. \u041e\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0442 \u0412\u0430\u043c \u043d\u0435 \u0431\u044b\u0442\u044c \u0433\u043e\u043b\u044b\u043c. \u0411\u0435\u0440\u0435\u0433\u0438\u0442\u0435 \u0438\u0445 \u0438\u0445 \u0438 \u043e\u043d\u0438 \u043f\u0440\u0438\u043d\u0435\u0441\u0443\u0442 \u0412\u0430\u043c \u0443\u0434\u0430\u0447\u0443",power:[{luck:3},{charm:1}],img:"img/underpants",isActive:!1};Object(a.useCallback)((function(){Oe.emit("ROOM:RELOCATION",{user:t,roomId:c})}),[c,t]);Object(a.useEffect)((function(){t.id&&(Oe.emit("ROOM:JOIN",{user:t,roomId:c}),Oe.emit("GET_ROOMS"))}),[t.id,c,t]),Object(a.useEffect)((function(){t.id&&Oe.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&Oe.on("SEND_NEW_ROOMS",(function(e){l(C(e))}))}),[t.id,l]),Object(a.useEffect)((function(){t.id&&Oe.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]);var m=Object(a.useCallback)(Object(oe.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/inventory",{params:o}).then((function(e){var t=e.data;l(w(t)),r(t)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[l,o]);Object(a.useEffect)((function(){m()}),[m]);var b=function(){var e=Object(oe.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/api/inventory/add",{item:d,id:o}).then((function(){m()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return t?Object(xe.jsxs)("div",{className:"store",children:[Object(xe.jsx)(pe,{user:t,roomId:c}),Object(xe.jsxs)("div",{className:"store__inner",children:[Object(xe.jsxs)("div",{className:"store__showcase",children:[Object(xe.jsx)("div",{className:"store__picture",children:Object(xe.jsx)("img",{src:"img/showcase.jpg",alt:"\u0432\u0438\u0442\u0440\u0438\u043d\u0430"})}),Object(xe.jsx)("div",{className:"store__good",children:Object(xe.jsx)("img",{src:"img/underpants.png",alt:"\u0442\u043e\u0432\u0430\u0440"})}),Object(xe.jsxs)("div",{className:"store__promo",children:[Object(xe.jsx)("button",{type:"button",className:"store__button",onClick:b,children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0447\u0443\u0434\u043e \u0442\u0440\u0443\u0441\u044b"}),Object(xe.jsxs)("div",{className:"store__promo-description",children:[Object(xe.jsx)("p",{className:"store__promo-title",children:"\u043a\u0440\u0430\u0441\u043d\u044b\u0435 \u0442\u0440\u0443\u0441\u0435\u043b\u044f"}),Object(xe.jsx)("p",{className:"store__promo-text",children:"\u042d\u0442\u0438 \u043b\u0435\u0433\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439 \u0442\u0440\u0443\u0441\u0435\u043b\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u043e\u0434\u0435\u0436\u0434\u044b \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0438\u0433\u0440\u044b. \u041e\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0442 \u0412\u0430\u043c \u043d\u0435 \u0431\u044b\u0442\u044c \u0433\u043e\u043b\u044b\u043c. \u0411\u0435\u0440\u0435\u0433\u0438\u0442\u0435 \u0438\u0445 \u0438\u0445 \u0438 \u043e\u043d\u0438 \u043f\u0440\u0438\u043d\u0435\u0441\u0443\u0442 \u0412\u0430\u043c \u0443\u0434\u0430\u0447\u0443"}),Object(xe.jsxs)("p",{className:"store__promo-power",children:["luck",Object(xe.jsx)("span",{children:"+3"})]}),Object(xe.jsxs)("p",{className:"store__promo-power",children:["charm",Object(xe.jsx)("span",{children:"+1"})]})]})]})]}),Object(xe.jsx)(we,{inventory:i,isStore:!0})]})]}):Object(xe.jsx)(he,{})});Oe.on("connect",(function(){Oe.connected&&console.log("\u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f")}));var Be,He=function(){var e=Object(j.c)(je),t=Object(j.c)(de);Oe.on("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e"),Oe.emit("ROOM:USER_OUT",t)}));var c=Object(j.b)();return""===t.location&&c(S(U)),ue(e)?Object(xe.jsx)(he,{}):Object(xe.jsx)(ae.a,{history:Je,children:Object(xe.jsxs)(ie.c,{children:[Object(xe.jsx)(ie.a,{exact:!0,path:U,children:Object(xe.jsx)(_e,{user:t})}),Object(xe.jsx)(ie.a,{exact:!0,path:D,children:Object(xe.jsx)(Se,{})}),Object(xe.jsx)(ie.a,{exact:!0,path:J,children:Object(xe.jsx)(Ee,{})}),Object(xe.jsx)(ie.a,{exact:!0,path:G,children:Object(xe.jsx)(Me,{user:t})}),Object(xe.jsx)(ie.a,{exact:!0,path:B,children:Object(xe.jsx)(Ge,{user:t,roomId:F})}),Object(xe.jsx)(ie.a,{exact:!0,path:H,children:Object(xe.jsx)(Ue,{user:t,roomId:V})}),Object(xe.jsx)(ie.a,{exact:!0,path:W,children:Object(xe.jsx)(Ue,{user:t,roomId:K})})]})})},We=function(e){return function(e){return function(t){return t.type===h&&Je.push(t.payload),e(t)}}},ze=(c(150),O((function(){return Pe.dispatch(k(A))}))),Pe=Object(o.a)({reducer:ne,middleware:function(e){return e({thunk:{extraArgument:ze}}).concat(We)}}),Fe=localStorage.getItem("userData");Pe.dispatch((Be=Fe,function(e,t,c){return c.post("api/auth/check").then((function(t){if(Be){var s=JSON.parse(Be).userId;e(k(t.data)),c.get("api/user/item",{params:s}).then((function(t){var c=t.data;e(I(c))})).catch((function(e){console.log(e)}))}else e(k("NO_AUTH"))})).catch((function(e){console.log(e)}))})),l.a.render(Object(xe.jsx)(i.a.StrictMode,{children:Object(xe.jsx)(j.a,{store:Pe,children:Object(xe.jsx)(He,{store:Pe})})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.f7d99d1c.chunk.js.map
{"version":3,"sources":["services/api.js","store/action.js","const.js","store/user/user.js","store/inventory/inventory.js","store/room/room.js","store/root-reducer.js","store/user/selectors.js","common.js","socket.js","components/navbar/Navbar.jsx","components/loader/Loader.jsx","store/room/selectors.js","components/page-main/Main.jsx","store/api-actions.js","components/form/Form.jsx","components/form/init-form1.js","components/page-auth/Auth.jsx","components/page-reg/Reg.jsx","components/inventory-item/InventoryItem.jsx","components/inventory-list/Inventory-list.jsx","store/inventory/selectors.js","components/equipment/Equipment.jsx","components/inventory-promo/InventoryPromo.jsx","components/user/User.jsx","components/connection-item/ConnectionItem.jsx","components/connection/Connection.jsx","components/app/chat/Chat.jsx","components/page-room/Room.jsx","browser-history.js","components/app/App.jsx","store/middlewares/redirect.js","index.js"],"names":["HttpCode","token","localStorage","getItem","createAPI","onUnauthorized","api","axios","create","baseURL","timeout","headers","interceptors","response","use","err","status","ActionType","requireAuthorization","createAction","payload","logout","setUserLocation","location","getUser","user","setInventory","inventory","setRooms","rooms","setOnlineUsers","users","redirectToRoute","url","setChosenItem","item","AuthorizationStatus","AppRoute","ROOMS","initialState","authorizationStatus","id","name","createReducer","builder","addCase","state","action","_id","login","console","log","chosenItem","room","onlineUsers","NameSpace","combineReducers","getAuthorizationStatus","isCheckedAuth","removeItem","socket","io","Navbar","roomId","isMainPage","useSelector","dispatch","useDispatch","history","useHistory","handleLogout","a","emit","push","window","reload","socketRelocation","useCallback","className","to","onClick","src","alt","Loader","getRooms","Main","onlineUsersLength","count","forEach","online_users","length","getAllOnlineUsers","createRoom","post","then","req","res","error","useEffect","once","on","type","reg","email","password","_getState","form","Form","pageName","loginRef","useRef","useState","setForm","resetForm","handleChange","evt","target","string","htmlEscapes","replace","match","encode","value","handleReg","current","textContent","style","placeholders","document","querySelectorAll","inputs","placeholderAnimationIn","parent","act","letters","slice","call","reverse","el","i","setTimeout","contains","classList","innerText","html","w","innerHTML","parentNode","addEventListener","add","remove","body","initRegForm","onSubmit","preventDefault","viewBox","cx","cy","r","fill","strokeWidth","strokeMiterlimit","min","max","onChange","required","ref","setItem","JSON","stringify","userLogin","data","userId","Auth","Reg","InventoryItem","handleItemFocus","handleItemBlur","isActive","tabIndex","onFocus","onBlur","title","InventoryList","map","index","getChosenItem","Equipment","InventoryPromo","getInventory","delete","clothOnItem","put","description","power","powerItem","powerItemKey","Object","keys","User","newInventory","setNewInventory","owner","luck","charm","img","get","params","createUnderpants","ConnectionItem","Connection","online_user","Chat","messageList","setMessageList","messages","msg","idx","author","Room","find","room_id","browserHistory","createBrowserHistory","connected","App","exact","path","redirect","_store","next","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","thunk","extraArgument","concat","parse","catch","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.40b21f89.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst BACKEND_URL = '/';\r\nconst REQUEST_TIMEOUT = 5000;\r\n\r\nconst HttpCode = {\r\n  UNAUTHORIZED: 401,\r\n};\r\n\r\nconst token = localStorage.getItem('token') ?? '';\r\n\r\nconst createAPI = (onUnauthorized) => {\r\n  const api = axios.create({\r\n    baseURL: BACKEND_URL,\r\n    timeout: REQUEST_TIMEOUT,\r\n    headers: {\r\n      'x-token': token,\r\n    },\r\n  });\r\n\r\n  const onSuccess = (response) => response;\r\n\r\n  const onFail = (err) => {\r\n    const {response} = err;\r\n\r\n    if (response.status === HttpCode.UNAUTHORIZED) {\r\n      onUnauthorized();\r\n    }\r\n\r\n    throw err;\r\n  };\r\n\r\n  api.interceptors.response.use(onSuccess, onFail);\r\n  return api;\r\n};\r\n\r\nexport default createAPI;\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nconst ActionType = {\r\n  REQUIRED_AUTHORIZATION: 'user/requiredAuthorization',\r\n  LOGOUT: 'user/logout',\r\n  REDIRECT_TO_ROUTE: 'user/redirectToRoute',\r\n  SET_USER: 'user/setUser',\r\n  SET_USER_LOCATION: 'user/setUserLocation',\r\n  SET_INVENTORY: 'user/setInventory',\r\n  SET_ROOMS: 'room/setRoomBD',\r\n  SET_ONLINE_USERS: 'room/setOnlineUsers',\r\n  SET_CHOSEN_ITEM: 'inventory/getInventory',\r\n};\r\n\r\nconst requireAuthorization = createAction(ActionType.REQUIRED_AUTHORIZATION, (status) => ({\r\n  payload: status,\r\n}));\r\n\r\nconst logout = createAction(ActionType.LOGOUT);\r\nconst setUserLocation = createAction(ActionType.SET_USER_LOCATION, (location) => ({payload: location}));\r\n\r\nconst getUser = createAction(ActionType.SET_USER, (user) => ({ payload: user }));\r\n\r\nconst setInventory = createAction(ActionType.SET_INVENTORY, (inventory) => ({ payload: inventory }));\r\n\r\nconst setRooms = createAction(ActionType.SET_ROOMS, (rooms) => ({ payload: rooms }));\r\nconst setOnlineUsers = createAction(ActionType.SET_ONLINE_USERS, (users) => ({ payload: users }));\r\n\r\nconst redirectToRoute = createAction(ActionType.REDIRECT_TO_ROUTE, (url) => ({ payload: url }));\r\n\r\nconst setChosenItem = createAction(ActionType.SET_CHOSEN_ITEM, (item) => ({ payload: item }));\r\n\r\nexport { ActionType, requireAuthorization, logout, redirectToRoute, getUser, setInventory, setChosenItem, setRooms, setOnlineUsers, setUserLocation };\r\n","const AuthorizationStatus = {\r\n    AUTH: 'AUTH',\r\n    NO_AUTH: 'NO_AUTH',\r\n    UNKNOWN: 'UNKNOWN',\r\n  };\r\n\r\nconst AppRoute = {\r\n    MAIN: '/',\r\n    REG: '/registration',\r\n    SIGN_IN: '/login',\r\n    PROFILE: '/profile',\r\n    ROOM_1: '/room-1',    \r\n    ROOM_2: '/room-2',    \r\n}\r\n\r\nconst APIRoute = {\r\n    REG: '/registration',\r\n    LOGIN: '/login',\r\n    LOGOUT: '/logout',\r\n    USER: '/user',\r\n    ROOM_1: '/room-1',\r\n    ROOM_2: '/room-2',\r\n  };\r\n\r\nconst ROOMS = {\r\n  MAIN_ROOM: '6111901e25947259b089bdb7',\r\n  REG_ROOM: '611190f825947259b089bdc7',\r\n  LOGIN_ROOM: '6111910925947259b089bdcb',\r\n  USER_ROOM: '6111911625947259b089bdcf',\r\n  ROOM_1: '6111912325947259b089bdd3',\r\n  ROOM_2: '6111912a25947259b089bdd7',\r\n}\r\n\r\nexport { AuthorizationStatus, AppRoute, APIRoute, ROOMS }","import { createReducer } from '@reduxjs/toolkit';\r\nimport { requireAuthorization, logout, getUser, setInventory, setUserLocation } from '../action';\r\nimport { AuthorizationStatus } from '../../const';\r\n\r\nconst initialState = {\r\n  authorizationStatus: AuthorizationStatus.UNKNOWN,\r\n  id: null,\r\n  name: '',\r\n  inventory: [],\r\n  location: '',\r\n};\r\n\r\nconst user = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(requireAuthorization, (state, action) => {\r\n      state.authorizationStatus = action.payload;\r\n    })\r\n    .addCase(setUserLocation, (state, action) => {\r\n      state.location = action.payload;\r\n    })\r\n    .addCase(logout, (state) => {\r\n      state.authorizationStatus = AuthorizationStatus.NO_AUTH;\r\n    })\r\n    .addCase(getUser, (state, action) => {\r\n      const user = action.payload[0];\r\n      if(user) {\r\n        state.id = user._id;\r\n        state.name = user.login;\r\n      } else {\r\n        console.log('юзера нет');\r\n      }\r\n    })\r\n    .addCase(setInventory, (state, action) => {\r\n      const inventory = action.payload;\r\n      if(inventory) {        \r\n        state.inventory = inventory;\r\n      } else {\r\n        console.log('инвернтарь не получен');\r\n      }\r\n    })\r\n});\r\n\r\nexport { user };\r\n","import { createReducer } from '@reduxjs/toolkit';\r\nimport { setChosenItem } from '../action';\r\n// import {  } from '../../const';\r\n\r\nconst initialState = {\r\n  chosenItem: {},\r\n};\r\n\r\nconst inventory = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(setChosenItem, (state, action) => {\r\n      state.chosenItem = action.payload;\r\n    })\r\n});\r\n\r\nexport { inventory };\r\n","import { createReducer } from '@reduxjs/toolkit';\r\nimport { setRooms, setOnlineUsers } from '../action';\r\n\r\nconst initialState = {\r\n  rooms: [],  \r\n};\r\n\r\nconst room = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(setRooms, (state, action) => {\r\n      console.log('ACTION', action.payload);\r\n      state.rooms = action.payload;\r\n    })\r\n    .addCase(setOnlineUsers, (state, action) => {\r\n      state.onlineUsers = action.payload;\r\n    })\r\n});\r\n\r\nexport { room };\r\n","import { combineReducers } from 'redux';\r\nimport { user } from './user/user';\r\nimport { inventory } from './inventory/inventory'; \r\nimport { room } from './room/room'; \r\n\r\nconst NameSpace = {\r\n  USER: 'USER',\r\n  INVENTORY: 'INVENTORY',\r\n  ROOM: 'ROOM',\r\n};\r\n\r\nexport { NameSpace };\r\n\r\nexport default combineReducers({\r\n  [NameSpace.USER]: user,\r\n  [NameSpace.INVENTORY]: inventory,\r\n  [NameSpace.ROOM]: room,\r\n});\r\n\r\n\r\n","import { NameSpace } from '../root-reducer';\r\n\r\nconst getAuthorizationStatus = (state) => state[NameSpace.USER].authorizationStatus;\r\nconst getUser = (state) => state[NameSpace.USER];\r\n\r\nexport { getAuthorizationStatus, getUser };\r\n","import { AuthorizationStatus } from \"./const\"\r\nimport { requireAuthorization } from \"./store/action\";\r\n\r\nconst isCheckedAuth = (authorizationStatus) =>\r\n  authorizationStatus === AuthorizationStatus.UNKNOWN;\r\n\r\nconst logout = () => {\r\n  console.log('logout');\r\n  localStorage.removeItem('userData');\r\n  requireAuthorization(AuthorizationStatus.NO_AUTH);\r\n}\r\n\r\nfunction encode(string) {\r\n  const htmlEscapes = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#39;'\r\n  };\r\n\r\n  return string.replace(/[&<>\"']/g, function(match) {\r\n      return htmlEscapes[match];\r\n  });\r\n};\r\n\r\nexport { isCheckedAuth, logout, encode }\r\n","import io from 'socket.io-client';\r\n\r\nconst socket = io();\r\n\r\nexport { socket }","import React, { useCallback } from 'react';\r\nimport { AppRoute } from '../../const';\r\nimport { getAuthorizationStatus } from '../../store/user/selectors';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { AuthorizationStatus } from '../../const';\r\nimport { logout } from '../../common';\r\nimport { useHistory } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { socket } from '../../socket';\r\n\r\nimport './navbar.scss'\r\n\r\nconst Navbar = ({ user, roomId, isMainPage }) => {\r\n  const authorizationStatus = useSelector(getAuthorizationStatus);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleLogout = async () => {\r\n    dispatch(logout);\r\n    socket.emit('USER_LEAVE', user)\r\n    history.push(AppRoute.MAIN)\r\n    window.location.reload();\r\n  }\r\n\r\n  const socketRelocation = useCallback(() => {\r\n    socket.emit('ROOM:RELOCATION', { user, roomId })\r\n  }, [roomId, user]);\r\n\r\n  if (authorizationStatus === AuthorizationStatus.NO_AUTH) {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <Link to={AppRoute.MAIN} className=\"navbar__logo\" onClick={socketRelocation}>\r\n          <div className=\"stage\">\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n          </div>\r\n        </Link>\r\n\r\n        <div className=\"glitch-btn-container\">\r\n          <Link to={AppRoute.REG} className=\"glitch-btn\" onClick={socketRelocation}>\r\n            <div className=\"text\">РЕГИСТРАЦИЯ<span className=\"hidden\">&nbsp;</span></div>\r\n            <div className=\"mask mask1\">\r\n              <span>РЕГИСТРАЦИЯ</span>\r\n            </div>\r\n            <div className=\"mask mask2\">\r\n              <span>РЕГИСТРАЦИЯ</span>\r\n            </div>\r\n            <div className=\"mask mask3\">\r\n              <span>РЕГИСТРАЦИЯ</span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"glitch-btn-container glitch-btn-container--enter\">\r\n          <Link to={AppRoute.SIGN_IN} className=\"glitch-btn\" onClick={socketRelocation}>\r\n            <div className=\"text\">ВХОД<span className=\"hidden\">&nbsp;</span></div>\r\n            <div className=\"mask mask1\">\r\n              <span>ВХОД</span>\r\n            </div>\r\n            <div className=\"mask mask2\">\r\n              <span>ВХОД</span>\r\n            </div>\r\n            <div className=\"mask mask3\">\r\n              <span>ВХОД</span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      {isMainPage &&\r\n        <div to={AppRoute.MAIN} className=\"navbar__logo\">\r\n          <div className=\"stage\">\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n          </div>\r\n        </div>\r\n      }\r\n\r\n      {!isMainPage &&\r\n        <Link to={AppRoute.MAIN} className=\"navbar__logo\" onClick={socketRelocation}>\r\n          <div className=\"stage\">\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n            <div className=\"layer\"></div>\r\n          </div>\r\n        </Link>\r\n      }\r\n\r\n      <div className=\"avatar\">\r\n        <div className=\"cabinet-btn-body\">\r\n          <Link to={AppRoute.PROFILE} className=\"cabinet-btn\" onClick={socketRelocation}>\r\n            <img className=\"cabinet-btn-avatar\" src=\"img/avatar.jpg\" alt=\"аватар\" />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"glitch-btn-container\">\r\n        <Link to={'#'} className=\"glitch-btn\" onClick={handleLogout}>\r\n          <div className=\"text\">ВЫЙТИ<span className=\"hidden\">&nbsp;</span></div>\r\n          <div className=\"mask mask1\">\r\n            <span>ВЫЙТИ</span>\r\n          </div>\r\n          <div className=\"mask mask2\">\r\n            <span>ВЫЙТИ</span>\r\n          </div>\r\n          <div className=\"mask mask3\">\r\n            <span>ВЫЙТИ</span>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nimport './loader.scss'\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"loader-container\">\r\n      <div className=\"wrapper\">\r\n        <div className=\"circle circle-1\"></div>\r\n        <div className=\"circle circle-1a\"></div>\r\n        <div className=\"circle circle-2\"></div>\r\n        <div className=\"circle circle-3\"></div>\r\n      </div>\r\n      <h1>Loading&hellip;</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n","import { NameSpace } from '../root-reducer';\r\n\r\nconst getRooms = (state) => state[NameSpace.ROOM].rooms;\r\nconst getOnlineUsers = (state) => state[NameSpace.ROOM].onlineUsers;\r\n\r\nexport { getRooms, getOnlineUsers };","import React, { useCallback, useEffect } from 'react';\r\nimport Navbar from '../navbar/Navbar';\r\nimport './page-main.scss'\r\nimport { getAuthorizationStatus } from '../../store/user/selectors';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { AuthorizationStatus } from '../../const';\r\nimport { isCheckedAuth } from '../../common';\r\nimport Loader from '../loader/Loader';\r\n// import browserHistory from '../../browser-history';\r\nimport axios from 'axios';\r\nimport { getRooms } from '../../store/room/selectors';\r\nimport { socket } from '../../socket';\r\n// import { useHistory } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { ROOMS } from '../../const';\r\nimport { setRooms } from '../../store/action';\r\n\r\nconst getAllOnlineUsers = (rooms) => {\r\n  let count = 0;\r\n  rooms.forEach((room) => {\r\n    count += room.online_users.length;\r\n  });\r\n  return count;\r\n}\r\n\r\nconst Main = ({ user }) => {\r\n\r\n  const authorizationStatus = useSelector(getAuthorizationStatus);\r\n  const roomId = ROOMS.MAIN_ROOM;\r\n  const rooms = useSelector(getRooms);\r\n  console.log('Комнаты из Стора: ', rooms);\r\n  const onlineUsersLength = getAllOnlineUsers(rooms);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const socketRelocation = useCallback(() => {\r\n    socket.emit('ROOM:RELOCATION', { user, roomId })\r\n  }, [roomId, user]);\r\n\r\n  const createRoom = async () => {\r\n    try {\r\n      axios.post('api/room/add-room', { name: 'ROOM_2' }).then((req, res) => {\r\n        console.log(res);\r\n      })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  //Sockets\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.emit('ROOM:JOIN', { user, roomId });\r\n    }\r\n  }, [user.id, roomId, user])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.once('ROOM:USER_JOINED');\r\n    }\r\n  }, [user.id])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.on('SEND_NEW_ROOMS', (rooms) => {\r\n        console.log('пришло новое состояние комнат', rooms);\r\n        dispatch(setRooms(rooms))\r\n      });\r\n    }\r\n  }, [user.id, dispatch])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.once(\"disconnect\", () => {\r\n        console.log('соединение разорвано');\r\n      });\r\n    }\r\n  }, [user.id])\r\n  //End Sockets\r\n\r\n\r\n\r\n  if (isCheckedAuth(authorizationStatus)) {\r\n    return (\r\n      <Loader />\r\n    );\r\n  }\r\n\r\n  if (authorizationStatus === AuthorizationStatus.AUTH) {\r\n    return (\r\n      <div className='page-main'>\r\n        <Navbar user={user} roomId={roomId} isMainPage={true}/>\r\n        <div className=\"page-main__navigation navigation\">\r\n          <div className=\"navigation__panel\">\r\n            <div className=\"navigation__info info\">\r\n              <p className=\"info__name\">{`Вы вошли как: ${user.name}`}</p>\r\n              <p className=\"info__statistic\">{`игроков онлайн: ${onlineUsersLength}`}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"page-main__inner\">\r\n        <section className=\"page-main__rooms\">\r\n          <h3>Список комнат:</h3>\r\n          <ul className=\"page-main__rooms__list\">\r\n            <li className=\"page-main__rooms__item\">\r\n              <Link to={'/room-1'} className=\"page-main__rooms__button\" type=\"button\" onClick={socketRelocation}>В комнату 1</Link>\r\n            </li>\r\n            <li className=\"page-main__rooms__item\">\r\n              <Link to={'/room-2'} className=\"page-main__rooms__button\" type=\"button\" onClick={socketRelocation}>В комнату 2</Link>\r\n            </li>\r\n            {user.name === 'Bronepuh' &&\r\n              <li className=\"page-main__rooms__item\">\r\n                <button className=\"page-main__button\" type=\"button\" onClick={createRoom}>Создать комнату</button>\r\n              </li>\r\n            }\r\n          </ul>\r\n        </section>\r\n        <section className=\"page-main__promo promo\">\r\n          <div className=\"promo__picture\">\r\n            <img src=\"img/poker-table-bg.png\" alt=\"промо\" />\r\n          </div>\r\n        </section>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className='page-main'>\r\n      <Navbar roomId={roomId} isMainPage={true}/>\r\n      <div className=\"page-main__navigation navigation\">\r\n        <div className=\"navigation__panel\">\r\n          <div className=\"navigation__info info\">\r\n            <p className=\"info__name\">{`Вы вошли как: Неопознанный Енот`}</p>\r\n            <p className=\"info__statistic\">{`игроков онлайн: ${onlineUsersLength}`}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Main;\r\n","import { requireAuthorization, redirectToRoute, getUser } from './action';\r\nimport { AppRoute, AuthorizationStatus } from '../const';\r\n\r\nconst checkAuth = (data) => (dispatch, _getState, api) => (\r\n  api.post('auth/check')\r\n    .then((res) => {\r\n      if (!data) {\r\n        dispatch(requireAuthorization('NO_AUTH'));\r\n      } else {\r\n        const fullData = JSON.parse(data);\r\n        const userId = fullData.userId\r\n        // console.log(userId);\r\n        dispatch(requireAuthorization(res.data));\r\n        api.get('user/item', { params: userId })\r\n          .then((res) => {\r\n            const user = res.data;\r\n            dispatch(getUser(user))\r\n          }).catch((err) => {\r\n            console.log(err);\r\n          })\r\n      }\r\n    })\r\n    .catch((err) => { console.log(err); })\r\n);\r\n\r\nconst reg = ({ login, email, password }) => async (dispatch, _getState, api) => {\r\n  const form = { login, email, password };\r\n  console.log('api', login, email, password);\r\n  try {\r\n    console.log('api', login, email, password);\r\n    await api.post('auth/registration', { ...form }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nconst login = ({ login, email, password }) => async (dispatch, _getState, api) => {\r\n  const form = { login, email, password };\r\n  try {\r\n    await api.post('auth/login', { ...form }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(res => {\r\n        localStorage.setItem('userData', JSON.stringify({\r\n          userLogin: res.data.userLogin,\r\n          userId: res.data.userId,\r\n          token: res.data.token,\r\n        }))\r\n        const user = (res.data)\r\n        dispatch(getUser(user));\r\n      })\r\n      .then(() => {\r\n        dispatch(requireAuthorization(AuthorizationStatus.AUTH));\r\n        dispatch(redirectToRoute(AppRoute.MAIN))\r\n        window.location.reload();\r\n      })\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n\r\n// const getRoomBD = (roomId) => async (dispatch, _getState, api) => {\r\n//   try {\r\n//     await api.get('/api/room', {params: roomId}).then((res) => {\r\n//       dispatch(setRoomBD(res.data));\r\n//     })\r\n//   } catch (error) {\r\n//     console.log(error);\r\n//   }\r\n// }\r\n\r\nexport { checkAuth, login, reg };\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport './form.scss';\r\nimport { initRegForm } from './init-form1';\r\nimport { getAuthorizationStatus } from '../../store/user/selectors';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { login, reg } from '../../store/api-actions';\r\nimport {encode} from '../../common'\r\nimport { AppRoute } from '../../const';\r\nimport { useHistory } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst Form = ({ pageName }) => {\r\n\r\n  const loginRef = useRef()\r\n  const history = useHistory()\r\n\r\n  const [form, setForm] = useState({\r\n    login: '',\r\n    email: '',\r\n    password: '',\r\n  })\r\n\r\n  const authorizationStatus = useSelector(getAuthorizationStatus);\r\n  const dispatch = useDispatch();\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      login: '',\r\n      email: '',\r\n      password: '',\r\n    })\r\n  }\r\n\r\n  const handleChange = (evt) => {\r\n    setForm({ ...form, [evt.target.name]: encode(evt.target.value)});\r\n  }\r\n\r\n  const handleReg = async () => {\r\n    console.log(form);\r\n\r\n    if(!form.login.length) {\r\n      loginRef.current.textContent = 'логин обязателен';\r\n      loginRef.current.style = 'color: #880000';\r\n      return console.log('нет логина!');\r\n    }\r\n    dispatch(reg(form));\r\n    resetForm();\r\n  }\r\n\r\n  const handleLogin = () => {\r\n    dispatch(login(form));\r\n    resetForm()\r\n  }\r\n\r\n  useEffect(() => {\r\n    initRegForm();\r\n  }, [])\r\n\r\n  return (\r\n    <form className=\"form\" onSubmit={(evt) => {evt.preventDefault()}}>\r\n      <div className=\"form__cover\"></div>\r\n      <div className=\"form__loader\">\r\n        <div className=\"spinner active\">\r\n          <svg className=\"spinner__circular\" viewBox=\"25 25 50 50\">\r\n            <circle className=\"spinner__path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" strokeWidth=\"4\" strokeMiterlimit=\"10\"></circle>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"form__content\">\r\n        {pageName === 'reg' &&\r\n          <h1>Регистрация</h1>\r\n        }\r\n        {pageName !== 'reg' &&\r\n          <h1>Авторизация</h1>\r\n        }\r\n        {pageName === 'reg' &&\r\n          <div className=\"styled-input\">\r\n            <input type=\"text\" className=\"styled-input__input\" name=\"login\" min=\"2\" max=\"15\" onChange={handleChange} value={form.value} required={true} />\r\n            <div ref={loginRef} className=\"styled-input__placeholder\">\r\n              <span className=\"styled-input__placeholder-text\">Логин</span>\r\n            </div>\r\n            <div className=\"styled-input__circle\"></div>\r\n          </div>\r\n        }\r\n\r\n        <div className=\"styled-input\">\r\n          <input type=\"email\" className=\"styled-input__input\" name=\"email\" onChange={handleChange} value={form.value} required={true} />\r\n          <div className=\"styled-input__placeholder\">\r\n            <span className=\"styled-input__placeholder-text\">Ваша&nbsp;почта</span>\r\n          </div>\r\n          <div className=\"styled-input__circle\"></div>\r\n        </div>\r\n        <div className=\"styled-input\">\r\n          <input type=\"password\" className=\"styled-input__input\" name=\"password\" min=\"2\" max=\"100\" onChange={handleChange} value={form.value} required={true} />\r\n          <div className=\"styled-input__placeholder\">\r\n            <span className=\"styled-input__placeholder-text\">Пароль</span>\r\n          </div>\r\n          <div className=\"styled-input__circle\"></div>\r\n        </div>\r\n\r\n        {pageName === 'reg' &&\r\n          <Link to={AppRoute.SIGN_IN} type=\"button\" className=\"styled-button\" onClick={handleReg}>\r\n            <span className=\"styled-button__real-text-holder\">\r\n              <span className=\"styled-button__real-text\">Зарегистрироваться</span>\r\n              <span className=\"styled-button__moving-block face\">\r\n                <span className=\"styled-button__text-holder\">\r\n                  <span className=\"styled-button__text\">Зарегистрироваться</span>\r\n                </span>\r\n              </span><span className=\"styled-button__moving-block back\">\r\n                <span className=\"styled-button__text-holder\">\r\n                  <span className=\"styled-button__text\">Зарегистрироваться</span>\r\n                </span>\r\n              </span>\r\n            </span>\r\n          </Link>\r\n        }\r\n\r\n        {pageName === 'auth' && authorizationStatus !== 'AUTH' &&\r\n          <button type=\"button\" className=\"styled-button\" onClick={handleLogin}>\r\n            <span className=\"styled-button__real-text-holder\">\r\n              <span className=\"styled-button__real-text\">Войти</span>\r\n              <span className=\"styled-button__moving-block face\">\r\n                <span className=\"styled-button__text-holder\">\r\n                  <span className=\"styled-button__text\">Войти</span>\r\n                </span>\r\n              </span><span className=\"styled-button__moving-block back\">\r\n                <span className=\"styled-button__text-holder\">\r\n                  <span className=\"styled-button__text\">Войти</span>\r\n                </span>\r\n              </span>\r\n            </span>\r\n          </button>\r\n        }\r\n\r\n      </div>\r\n    </form>\r\n\r\n  );\r\n}\r\n\r\nexport default Form;\r\n","const initRegForm = () => {\r\n  const placeholders = document.querySelectorAll('.styled-input__placeholder-text');\r\n  const inputs = document.querySelectorAll('.styled-input__input');\r\n\r\n\r\n  if (placeholders && inputs) {\r\n    placeholders.forEach(function (el, i) {\r\n      let value = el.innerText,\r\n        html = '';\r\n      for (let w of value) {\r\n        if (!value) value = '&nbsp;';\r\n        html += `<span class=\"letter\">${w}</span>`;\r\n      }\r\n      el.innerHTML = html;\r\n    });\r\n\r\n    inputs.forEach(function (el) {\r\n      let parent = el.parentNode;\r\n      el.addEventListener('focus', function () {\r\n        parent.classList.add('filled');\r\n        placeholderAnimationIn(parent, true);\r\n      }, false);\r\n      el.addEventListener('blur', function () {\r\n        if (el.value.length) return;\r\n        parent.classList.remove('filled');\r\n        placeholderAnimationIn(parent, false);\r\n      }, false);\r\n    });\r\n\r\n\r\n    function placeholderAnimationIn(parent, action) {\r\n      let act = (action) ? 'add' : 'remove';\r\n      let letters = parent.querySelectorAll('.letter');\r\n      letters = [].slice.call(letters, 0);\r\n      if (!action) letters = letters.reverse();\r\n      letters.forEach(function (el, i) {\r\n        setTimeout(function () {\r\n          let contains = parent.classList.contains('filled');\r\n          if ((action && !contains) || (!action && contains)) return;\r\n          el.classList[act]('active');\r\n        }, (50 * i));\r\n      });\r\n    }\r\n\r\n    setTimeout(function () {\r\n      document.body.classList.add('on-start');\r\n    }, 100);\r\n\r\n    setTimeout(function () {\r\n      document.body.classList.add('document-loaded');\r\n    }, 1800);\r\n  }  \r\n  \r\n}\r\n\r\n\r\n\r\nexport { initRegForm }\r\n\r\n","import React from 'react';\r\nimport Form from '../form/Form';\r\nimport Navbar from '../navbar/Navbar';\r\nimport './page-auth.scss';\r\nimport { isCheckedAuth } from '../../common';\r\nimport { getAuthorizationStatus } from '../../store/user/selectors';\r\nimport { useSelector } from 'react-redux';\r\nimport Loader from '../loader/Loader';\r\n\r\nconst Auth = () => {\r\n  const authorizationStatus = useSelector(getAuthorizationStatus);\r\n\r\n  if (isCheckedAuth(authorizationStatus)) {\r\n    return (\r\n      <Loader />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-auth\">\r\n      <Navbar />\r\n      <Form pageName={'auth'}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Auth;\r\n","import React from 'react';\r\nimport Form from '../form/Form';\r\nimport Navbar from '../navbar/Navbar';\r\nimport './page-reg.scss';\r\n// import { useHistory } from 'react-router';\r\n\r\n// import { ROOMS } from '../../const';\r\n\r\n// const roomId = ROOMS.REG_ROOM;\r\n\r\nconst Reg = () => {\r\n\r\n  return (\r\n    <div className=\"page-reg\">\r\n      <Navbar />      \r\n      <Form pageName={'reg'}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reg;\r\n","import React from 'react';\r\nimport './inventory-item.scss'\r\nimport { useDispatch } from 'react-redux';\r\nimport { setChosenItem } from '../../store/action';\r\n\r\n\r\nconst InventoryItem = ({ item }) => {\r\n  // const [newChoseItem, setNewChoseItem] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const handleItemFocus = () => {\r\n    // setNewChoseItem(item);\r\n    dispatch(setChosenItem(item));\r\n  }\r\n\r\n  const handleItemBlur = () => {\r\n    // setNewChoseItem({});\r\n    // dispatch(setChosenItem({}));\r\n  }\r\n\r\n  if (!item.isActive) {\r\n    return (\r\n      <li className='inventory__item' tabIndex=\"0\" onFocus={handleItemFocus} onBlur={handleItemBlur}>\r\n        <div className=\"inventory__item-inner\">\r\n          <p className=\"inventory__item-title\">{item.title}</p>\r\n          <img className=\"inventory__item-picture\" src=\"img/underpants.png\" alt=\"\" />\r\n        </div>\r\n        <div className=\"inventory__item-cloth\">\r\n          <img className=\"inventory__item-cloth-picture\" src=\"img/underpants.png\" alt=\"\" />\r\n        </div>\r\n      </li>\r\n    );\r\n  } else {\r\n    return (\r\n      <li className='inventory__item inventory__item--active' tabIndex=\"0\" onFocus={handleItemFocus} onBlur={handleItemBlur}>\r\n        <div className=\"inventory__item-inner\">\r\n          <p className=\"inventory__item-title\">{item.title}</p>\r\n          <img className=\"inventory__item-picture\" src=\"img/underpants.png\" alt=\"\" />\r\n        </div>\r\n        <div className=\"inventory__item-cloth\">\r\n          <img className=\"inventory__item-cloth-picture\" src=\"img/underpants.png\" alt=\"\" />\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InventoryItem;\r\n","import React from 'react';\r\nimport InventoryItem from '../inventory-item/InventoryItem';\r\nimport './inventory-list.scss'\r\n\r\nconst InventoryList = ({ inventory }) => {\r\n  return (\r\n    <ul className=\"inventory__list\">\r\n      {inventory.map((item, index) => <InventoryItem key={index} item={item} />)}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default InventoryList;\r\n","import { NameSpace } from '../root-reducer';\r\n\r\nconst getChosenItem = (state) => state[NameSpace.INVENTORY].chosenItem;\r\n\r\nexport { getChosenItem };","import React from 'react';\r\nimport './equipment.scss'\r\n\r\n\r\nconst Equipment = () => {\r\n  return (\r\n    <div className=\"inventory__promo-equipment equipment\">\r\n    <div className=\"equipment__picture\">\r\n      <img src=\"img/siluet.png\" alt=\"картинка\" />\r\n    </div>\r\n    <ul className=\"equipment__list\">\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n      <li className=\"equipment__item\">\r\n        <div className=\"equipment__item-inner\"></div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default Equipment;\r\n","import React from 'react';\r\nimport './inventory-promo.scss';\r\nimport { getChosenItem } from '../../store/inventory/selectors';\r\nimport { useSelector } from 'react-redux';\r\nimport Equipment from '../equipment/Equipment';\r\nimport axios from 'axios'\r\nimport { useDispatch } from 'react-redux';\r\nimport { setChosenItem } from '../../store/action';\r\n\r\nconst InventoryPromo = ({ user, getInventory }) => {\r\n  const chosenItem = useSelector(getChosenItem);\r\n  const dispatch = useDispatch();\r\n  \r\n  const removeItem = async () => {\r\n    const id = chosenItem._id;\r\n    try {\r\n      await axios.delete(`/api/inventory/delete/${id}`).then((res) => {  \r\n        dispatch(setChosenItem({}));\r\n        getInventory();        \r\n      })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const clothOnItem = async () => {\r\n    const id = chosenItem._id;\r\n    try {\r\n      await axios.put(`/api/inventory/active/${id}`, {id:id}).then((res) => {  \r\n        console.log(res);\r\n        dispatch(setChosenItem({}));\r\n        getInventory();        \r\n      })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  if (chosenItem._id) {\r\n    return (\r\n      <div className=\"inventory__promo\">\r\n        <div className=\"inventory__promo-settings\">\r\n          <p className=\"inventory__promo-title\">{chosenItem.title}</p>\r\n          <p className=\"inventory__promo-description\">{chosenItem.description}</p>\r\n          <ul className=\"inventory__promo-list\">\r\n            {\r\n              chosenItem.power.map((powerItem, index) => {\r\n                const powerItemKey = Object.keys(powerItem)[0];\r\n                return (\r\n                  <li className=\"inventory__promo-item\" key={index}>{powerItemKey}\r\n                    <span className=\"inventory__promo-power\">{`+ ${powerItem[powerItemKey]}`}</span>\r\n                  </li>\r\n                )\r\n              })\r\n            }\r\n          </ul>\r\n          <button className=\"inventory__promo-delete\" onClick={removeItem}>удалить</button>\r\n          <button className=\"inventory__promo-put-on\" onClick={clothOnItem}>{`${chosenItem.isActive ? 'снять': 'одеть'}`}</button>\r\n        </div>\r\n        <Equipment />\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"inventory__promo\">\r\n      <div className=\"inventory__promo-settings\">\r\n        <p className=\"inventory__promo-title\">{user.name}</p>\r\n      </div>\r\n      <Equipment />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InventoryPromo;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { AppRoute } from '../../const';\r\n// import { useHistory } from 'react-router';\r\nimport './page-user.scss'\r\nimport '../../scss/inventory.scss'\r\nimport axios from 'axios'\r\nimport { setInventory } from '../../store/action';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport InventoryList from '../inventory-list/Inventory-list';\r\nimport InventoryPromo from '../inventory-promo/InventoryPromo';\r\nimport Loader from '../loader/Loader';\r\nimport { Link } from 'react-router-dom';\r\nimport { socket } from '../../socket';\r\nimport { ROOMS } from '../../const';\r\nimport { getRooms } from '../../store/room/selectors';\r\nimport { setRooms } from '../../store/action';\r\n\r\nconst User = ({ user }) => {\r\n  const roomId = ROOMS.USER_ROOM\r\n  const [newInventory, setNewInventory] = useState([]);\r\n  const dispatch = useDispatch();\r\n  // const history = useHistory();\r\n  const id = user.id;\r\n\r\n  const rooms = useSelector(getRooms);\r\n  console.log('Комнаты из Стора: ', rooms);\r\n\r\n  const item = {\r\n    owner: id,\r\n    title: 'красные труселя',\r\n    description: 'Эти легендаоные труселя являются незаменимым талисманом удачливого игрока. Данный артефакт появляется в начале игры и очень сильно привязывается к своему хозяину. Берегите его и он отплатит Вам, принеся удачу (но это неточно)',\r\n    power: [{ luck: 3 }, { charm: 1 }],\r\n    img: 'img/underpants',\r\n    isActive: false,\r\n  }\r\n\r\n  const socketRelocation = useCallback(() => {\r\n    socket.emit('ROOM:RELOCATION', { user, roomId })    \r\n  }, [roomId, user]);\r\n\r\n\r\n\r\n  //Sockets\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.emit('ROOM:JOIN', { user, roomId });\r\n      socket.emit('GET_ROOMS');\r\n    }\r\n  }, [user.id, roomId, user])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.once('ROOM:USER_JOINED');\r\n    }\r\n  }, [user.id])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.on('SEND_NEW_ROOMS', (rooms) => {\r\n        console.log('пришло новое состояние комнат', rooms);\r\n        dispatch(setRooms(rooms))\r\n      });\r\n    }\r\n  }, [user.id, dispatch])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.once(\"disconnect\", () => {\r\n        console.log('соединение разорвано');\r\n      });\r\n    }\r\n  }, [user.id])\r\n  //End Sockets\r\n\r\n\r\n\r\n\r\n  const getInventory = useCallback(async () => {\r\n    try {\r\n      await axios.get('/api/inventory', { params: id }).then((res) => {\r\n        const data = res.data;\r\n        dispatch(setInventory(data))\r\n        setNewInventory(data);\r\n      })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [dispatch, id])\r\n\r\n  useEffect(() => {\r\n    getInventory();\r\n  }, [getInventory]);\r\n\r\n\r\n  const createUnderpants = async () => {\r\n    try {\r\n      await axios.post('/api/inventory/add', { item, id })\r\n        .then(() => {\r\n          getInventory();\r\n        })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  if (user) {\r\n    return (\r\n      <div className=\"page-user\">\r\n        <div className=\"navbar\">\r\n          <div className=\"navbar__user-name\">{user.name}</div>\r\n          <Link to={AppRoute.MAIN} className=\"user__logo\" onClick={socketRelocation} >Pokerman</Link>\r\n        </div>\r\n        <h2 className=\"page-reg__title\">Личный кабинет</h2>\r\n        <div className=\"page-user__inventory inventory\">\r\n          <InventoryList inventory={newInventory} />\r\n          <InventoryPromo user={user} getInventory={getInventory} />\r\n        </div>\r\n        <button type=\"button\" className=\"page-user__get-underpants\" onClick={createUnderpants}>Создать трусы</button>\r\n        <button type=\"button\" className=\"page-user__get-underpants\" onClick={getInventory}>Получить трусы</button>\r\n      </div>\r\n    );\r\n  } else {\r\n    return <Loader />\r\n  }\r\n}\r\n\r\nexport default User;","import React from 'react';\r\nimport './connection-item.scss'\r\n\r\nconst ConnectionItem = ({user}) => {\r\n  if(user) {\r\n    return (\r\n      <li className=\"connection__item\">{user.name}</li>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default ConnectionItem;\r\n","import React from 'react';\r\nimport ConnectionItem from '../connection-item/ConnectionItem';\r\nimport './connection.scss'\r\n\r\nconst Connection = ({ room }) => {\r\n  if (room) {\r\n    return (\r\n      <section className=\"page-room__connection connection\">\r\n        <h2 className=\"connection__title\">Сейчас в комнате:</h2>\r\n        <ul className=\"connection__list\">\r\n          {room.online_users.map((online_user) => <ConnectionItem key={online_user.id} user={online_user} />)}\r\n        </ul>\r\n      </section>\r\n    );\r\n  } else {\r\n    return (\r\n      <section className=\"page-room__connection connection\">\r\n        <h2 className=\"connection__title\">Сейчас в комнате:</h2>\r\n        <ul className=\"connection__list\">\r\n\r\n          <ConnectionItem />\r\n        </ul>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Connection;\r\n","import React, { useEffect, useState } from 'react';\r\nimport './chat.scss';\r\nimport { socket } from '../../../socket';\r\nimport { encode } from '../../../common';\r\n\r\nconst Chat = ({ user, roomId }) => {\r\n  const [messageList, setMessageList] = useState({});\r\n  if(messageList[0]) {\r\n    console.log(messageList);\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    if (user.id) {\r\n      socket.emit('SEND_MESSAGE', {\r\n        roomId: roomId,\r\n        author: user.name,\r\n        msg: evt.target[0].value\r\n      })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.emit('GET_MESSAGES', roomId)\r\n    }\r\n  }, [user, roomId])\r\n\r\n  socket.on('MESSAGE_CREATED', (messages) => {\r\n    setMessageList(messages)\r\n  })\r\n\r\n\r\n  const clearMessages = () => {\r\n    socket.emit('CLEAR_MSG', roomId);\r\n    setMessageList([]);\r\n    socket.emit('GET_MESSAGES', roomId);\r\n  }\r\n\r\n  return (\r\n    <section className=\"chat\">\r\n      <h3 className=\"chat__title\">Сообщения: </h3>\r\n      <div className=\"chat__list-wrapper\">\r\n        <ul className=\"chat__list\">\r\n          {messageList.length > 0 &&\r\n            messageList.map((msg, idx) => {\r\n              return (\r\n                <li className=\"chat__item\" key={idx} >\r\n                  <div className=\"chat__avatar\">{msg.author}</div>\r\n                  <div className=\"chat__message\">\r\n                    <p className=\"chat__text\">{msg.msg}</p>\r\n                  </div>\r\n                </li>)\r\n            })}\r\n        </ul>\r\n      </div>\r\n      <form className=\"chat__form\" onSubmit={handleSubmit}>\r\n        <textarea className=\"chat__textarea\" type=\"text\" />\r\n        <button className=\"chat__btn\" type=\"submit\">ok</button>\r\n      </form>\r\n      <button className=\"chat__message\" onClick={clearMessages}>clear messages</button>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import Connection from '../connection/Connection';\r\nimport React, { useEffect } from 'react';\r\nimport Navbar from '../navbar/Navbar';\r\nimport './page-room.scss';\r\n// import { getRoomBD } from '../../store/api-actions';\r\n// import { getRoomFromStore, getOnlineUsers } from '../../store/room/selectors';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n// import axios from 'axios';\r\nimport { socket } from '../../socket';\r\n// import { setOnlineUsers } from '../../store/action';\r\nimport { setRooms } from '../../store/action';\r\nimport { getRooms } from '../../store/room/selectors';\r\nimport Chat from '../app/chat/Chat';\r\n\r\nconst Room = ({ user, roomId }) => {\r\n\r\n  const rooms = useSelector(getRooms);\r\n  console.log('Комнаты из Стора: ', rooms);\r\n\r\n  let room = null;\r\n\r\n  if (rooms.length) {\r\n    room = rooms.find((item) => item.room_id === roomId)\r\n  }\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  //Sockets\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.emit('ROOM:JOIN', { user, roomId });\r\n      socket.emit('GET_ROOMS');\r\n    }\r\n  }, [user.id, roomId, user])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.once('ROOM:USER_JOINED');\r\n    }\r\n  }, [user.id])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.on('SEND_NEW_ROOMS', (rooms) => {\r\n        console.log('пришло новое состояние комнат', rooms);\r\n        dispatch(setRooms(rooms))\r\n      });\r\n    }\r\n  }, [user.id, dispatch])\r\n\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      socket.once(\"disconnect\", () => {\r\n        console.log('соединение разорвано');\r\n      });\r\n    }\r\n  }, [user.id])\r\n\r\n\r\n  // useEffect(() => {\r\n  //   if (user.id && roomId) {\r\n  //     socket.on('MESSAGE_CREATED', (messages) => {\r\n  //       console.log(messages);\r\n  //     });\r\n  //   }\r\n  // }, [user.id, roomId])\r\n  //End Sockets\r\n\r\n  return (\r\n    <div className=\"page-room\">\r\n      <Navbar user={user} roomId={roomId} />\r\n      <div className=\"page-room__inner\">\r\n        <Chat user={user} roomId={roomId} />\r\n        <Connection room={room} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Room;\r\n","import { createBrowserHistory } from \"history\"; \r\n\r\nconst browserHistory = createBrowserHistory();\r\n\r\nexport default browserHistory;\r\n","import React from 'react';\nimport { Switch, Route, BrowserRouter } from 'react-router-dom';\nimport Main from '../page-main/Main';\nimport Auth from '../page-auth/Auth';\nimport { AppRoute } from '../../const';\nimport Reg from '../page-reg/Reg';\nimport { getAuthorizationStatus, getUser } from '../../store/user/selectors';\nimport { setUserLocation } from '../../store/action';\nimport Loader from '../loader/Loader';\nimport { isCheckedAuth } from '../../common';\nimport './app.scss'\nimport User from '../user/User';\nimport Room from '../page-room/Room';\nimport { socket } from '../../socket';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ROOMS } from '../../const';\nimport browserHistory from '../../browser-history';\n// import axios from 'axios';\n\nsocket.on(\"connect\", () => {\n  if (socket.connected) {\n    console.log('успешно соединился');\n  }\n});\n\nfunction App() {\n\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const user = useSelector(getUser);\n\n  socket.on(\"disconnect\", () => {\n    console.log('соединение разорвано');\n    socket.emit('ROOM:USER_OUT', user);\n  });\n\n\n  const dispatch = useDispatch();\n\n  if (user.location === '') {\n    dispatch(setUserLocation(AppRoute.MAIN));\n  }\n\n  if (isCheckedAuth(authorizationStatus)) {\n    return (\n      <Loader />\n    );\n  }\n\n  return (\n    <BrowserRouter history={browserHistory}>\n      <Switch>\n        <Route exact path={AppRoute.MAIN}>\n          <Main user={user} />\n        </Route>\n        <Route exact path={AppRoute.REG}>\n          <Reg />\n        </Route>\n        <Route exact path={AppRoute.SIGN_IN}>\n          <Auth />\n        </Route>\n        <Route exact path={AppRoute.PROFILE}>\n          <User user={user} />\n        </Route>\n        <Route exact path={AppRoute.ROOM_1}>\n          <Room user={user} roomId={ROOMS.ROOM_1} />\n        </Route>\n        <Route exact path={AppRoute.ROOM_2}>\n          <Room user={user} roomId={ROOMS.ROOM_2} />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n\n  )\n}\n\nexport default App;","import browserHistory from '../../browser-history';\r\nimport {ActionType} from '../action';\r\n\r\nconst redirect = (_store) => (next) => (action) => {\r\n  if (action.type === ActionType.REDIRECT_TO_ROUTE) {\r\n    browserHistory.push(action.payload);\r\n  }\r\n\r\n  return next(action);\r\n};\r\n\r\nexport default redirect;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { configureStore } from '@reduxjs/toolkit';\nimport { Provider } from 'react-redux';\nimport createAPI from './services/api';\nimport { requireAuthorization } from './store/action';\n// import { checkAuth } from './store/api-actions';\nimport { AuthorizationStatus } from './const';\nimport rootReducer from './store/root-reducer';\n// import { Router as BrowserRouter } from 'react-router-dom';\nimport App from './components/app/App';\nimport redirect from './store/middlewares/redirect';\n// import { Router as BrowserRouter } from 'react-router-dom';\n// import browserHistory from './browser-history';\nimport { checkAuth } from './store/api-actions';\nimport './index.scss';\n\nconst api = createAPI(\n  () => store.dispatch(requireAuthorization(AuthorizationStatus.NO_AUTH)),\n);\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }).concat(redirect),\n});\n\nconst data = localStorage.getItem('userData');\nstore.dispatch(checkAuth(data));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App store={store} />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
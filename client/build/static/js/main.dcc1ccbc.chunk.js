(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){},135:function(e,t,c){},136:function(e,t,c){},137:function(e,t,c){},138:function(e,t,c){},139:function(e,t,c){},140:function(e,t,c){},141:function(e,t,c){},142:function(e,t,c){},143:function(e,t,c){},144:function(e,t,c){},145:function(e,t,c){},146:function(e,t,c){},147:function(e,t,c){},148:function(e,t,c){},149:function(e,t,c){},150:function(e,t,c){"use strict";c.r(t);var s,n,a=c(1),i=c.n(a),r=c(30),l=c.n(r),o=c(6),j=c(3),d=c(18),m=c.n(d),u=401,b=null!==(s=localStorage.getItem("token"))&&void 0!==s?s:"",O=function(e){var t=m.a.create({baseURL:"/",timeout:5e3,headers:{"x-token":b}});return t.interceptors.response.use((function(e){return e}),(function(t){throw t.response.status===u&&e(),t})),t},x="user/requiredAuthorization",p="user/logout",v="user/redirectToRoute",h="user/setUser",_="user/setUserLocation",N="user/setInventory",f="room/setRoomBD",y="room/setOnlineUsers",g="inventory/getInventory",k=Object(o.b)(x,(function(e){return{payload:e}})),E=Object(o.b)(p),S=Object(o.b)(_,(function(e){return{payload:e}})),I=Object(o.b)(h,(function(e){return{payload:e}})),w=Object(o.b)(N,(function(e){return{payload:e}})),C=Object(o.b)(f,(function(e){return{payload:e}})),R=Object(o.b)(y,(function(e){return{payload:e}})),q=Object(o.b)(v,(function(e){return{payload:e}})),M=Object(o.b)(g,(function(e){return{payload:e}})),A="AUTH",T="NO_AUTH",L="UNKNOWN",U="/",D="/registration",J="/login",G="/profile",B="/room-1",z="/room-2",H="6111901e25947259b089bdb7",W="6111911625947259b089bdcf",P="6111912325947259b089bdd3",F="6111912a25947259b089bdd7",V=c(19),K=c(12),Y={authorizationStatus:L,id:null,name:"",inventory:[],location:""},Q=Object(o.c)(Y,(function(e){e.addCase(k,(function(e,t){e.authorizationStatus=t.payload})).addCase(S,(function(e,t){e.location=t.payload})).addCase(E,(function(e){e.authorizationStatus=T})).addCase(I,(function(e,t){var c=t.payload[0];c?(e.id=c._id,e.name=c.login):console.log("\u044e\u0437\u0435\u0440\u0430 \u043d\u0435\u0442")})).addCase(w,(function(e,t){var c=t.payload;c?e.inventory=c:console.log("\u0438\u043d\u0432\u0435\u0440\u043d\u0442\u0430\u0440\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d")}))})),X=Object(o.c)({chosenItem:{}},(function(e){e.addCase(M,(function(e,t){e.chosenItem=t.payload}))})),Z=Object(o.c)({rooms:[]},(function(e){e.addCase(C,(function(e,t){console.log("ACTION",t.payload),e.rooms=t.payload})).addCase(R,(function(e,t){e.onlineUsers=t.payload}))})),$="USER",ee="INVENTORY",te="ROOM",ce=Object(K.b)((n={},Object(V.a)(n,$,Q),Object(V.a)(n,ee,X),Object(V.a)(n,te,Z),n)),se=c(7),ne=c(4),ae=c(5),ie=c.n(ae),re=c(9),le=function(e){return e[$].authorizationStatus},oe=function(e){return e[$]},je=function(e){return e===L},de=function(){console.log("logout"),localStorage.removeItem("userData"),k(T)};var me=c(68),ue=c.n(me)()(),be=(c(127),c(0)),Oe=function(e){var t=e.user,c=e.roomId,s=e.isMainPage,n=Object(j.c)(le),i=Object(j.b)(),r=Object(ne.f)(),l=function(){var e=Object(re.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(de),ue.emit("USER_LEAVE",t),r.push(U),window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=Object(a.useCallback)((function(){ue.emit("ROOM:RELOCATION",{user:t,roomId:c})}),[c,t]);return n===T?Object(be.jsxs)("div",{className:"navbar",children:[Object(be.jsx)(se.b,{to:U,className:"navbar__logo",onClick:o,children:Object(be.jsxs)("div",{className:"stage",children:[Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"})]})}),Object(be.jsx)("div",{className:"glitch-btn-container",children:Object(be.jsxs)(se.b,{to:D,className:"glitch-btn",onClick:o,children:[Object(be.jsxs)("div",{className:"text",children:["\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f",Object(be.jsx)("span",{className:"hidden",children:"\xa0"})]}),Object(be.jsx)("div",{className:"mask mask1",children:Object(be.jsx)("span",{children:"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"})}),Object(be.jsx)("div",{className:"mask mask2",children:Object(be.jsx)("span",{children:"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"})}),Object(be.jsx)("div",{className:"mask mask3",children:Object(be.jsx)("span",{children:"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f"})})]})}),Object(be.jsx)("div",{className:"glitch-btn-container glitch-btn-container--enter",children:Object(be.jsxs)(se.b,{to:J,className:"glitch-btn",onClick:o,children:[Object(be.jsxs)("div",{className:"text",children:["\u0412\u0425\u041e\u0414",Object(be.jsx)("span",{className:"hidden",children:"\xa0"})]}),Object(be.jsx)("div",{className:"mask mask1",children:Object(be.jsx)("span",{children:"\u0412\u0425\u041e\u0414"})}),Object(be.jsx)("div",{className:"mask mask2",children:Object(be.jsx)("span",{children:"\u0412\u0425\u041e\u0414"})}),Object(be.jsx)("div",{className:"mask mask3",children:Object(be.jsx)("span",{children:"\u0412\u0425\u041e\u0414"})})]})})]}):Object(be.jsxs)("div",{className:"navbar",children:[s&&Object(be.jsx)("div",{to:U,className:"navbar__logo",children:Object(be.jsxs)("div",{className:"stage",children:[Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"})]})}),!s&&Object(be.jsx)(se.b,{to:U,className:"navbar__logo",onClick:o,children:Object(be.jsxs)("div",{className:"stage",children:[Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"}),Object(be.jsx)("div",{className:"layer"})]})}),Object(be.jsx)("div",{className:"avatar",children:Object(be.jsx)("div",{className:"cabinet-btn-body",children:Object(be.jsx)(se.b,{to:G,className:"cabinet-btn",onClick:o,children:Object(be.jsx)("img",{className:"cabinet-btn-avatar",src:"img/avatar.jpg",alt:"\u0430\u0432\u0430\u0442\u0430\u0440"})})})}),Object(be.jsx)("div",{className:"glitch-btn-container",children:Object(be.jsxs)(se.b,{to:"#",className:"glitch-btn",onClick:l,children:[Object(be.jsxs)("div",{className:"text",children:["\u0412\u042b\u0419\u0422\u0418",Object(be.jsx)("span",{className:"hidden",children:"\xa0"})]}),Object(be.jsx)("div",{className:"mask mask1",children:Object(be.jsx)("span",{children:"\u0412\u042b\u0419\u0422\u0418"})}),Object(be.jsx)("div",{className:"mask mask2",children:Object(be.jsx)("span",{children:"\u0412\u042b\u0419\u0422\u0418"})}),Object(be.jsx)("div",{className:"mask mask3",children:Object(be.jsx)("span",{children:"\u0412\u042b\u0419\u0422\u0418"})})]})})]})},xe=(c(133),c(134),function(){return Object(be.jsxs)("div",{className:"loader-container",children:[Object(be.jsxs)("div",{className:"wrapper",children:[Object(be.jsx)("div",{className:"circle circle-1"}),Object(be.jsx)("div",{className:"circle circle-1a"}),Object(be.jsx)("div",{className:"circle circle-2"}),Object(be.jsx)("div",{className:"circle circle-3"})]}),Object(be.jsx)("h1",{children:"Loading\u2026"})]})}),pe=function(e){return e[te].rooms},ve=function(e){var t=e.user,c=Object(j.c)(le),s=H,n=Object(j.c)(pe);console.log("\u041a\u043e\u043c\u043d\u0430\u0442\u044b \u0438\u0437 \u0421\u0442\u043e\u0440\u0430: ",n);var i=function(e){var t=0;return e.forEach((function(e){t+=e.online_users.length})),t}(n),r=Object(j.b)(),l=Object(a.useCallback)((function(){ue.emit("ROOM:RELOCATION",{user:t,roomId:s})}),[s,t]),o=function(){var e=Object(re.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m.a.post("api/room/add-room",{name:"ROOM_2"}).then((function(e,t){console.log(t)}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t.id&&ue.emit("ROOM:JOIN",{user:t,roomId:s})}),[t.id,s,t]),Object(a.useEffect)((function(){t.id&&ue.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&ue.on("SEND_NEW_ROOMS",(function(e){console.log("\u043f\u0440\u0438\u0448\u043b\u043e \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442",e),r(C(e))}))}),[t.id,r]),Object(a.useEffect)((function(){t.id&&ue.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]),je(c)?Object(be.jsx)(xe,{}):c===A?Object(be.jsxs)("div",{className:"page-main",children:[Object(be.jsx)(Oe,{user:t,roomId:s,isMainPage:!0}),Object(be.jsx)("div",{className:"page-main__navigation navigation",children:Object(be.jsx)("div",{className:"navigation__panel",children:Object(be.jsxs)("div",{className:"navigation__info info",children:[Object(be.jsx)("p",{className:"info__name",children:"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a: ".concat(t.name)}),Object(be.jsx)("p",{className:"info__statistic",children:"\u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u043e\u043d\u043b\u0430\u0439\u043d: ".concat(i)})]})})}),Object(be.jsxs)("div",{className:"page-main__inner",children:[Object(be.jsxs)("section",{className:"page-main__rooms",children:[Object(be.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043c\u043d\u0430\u0442:"}),Object(be.jsxs)("ul",{className:"page-main__rooms__list",children:[Object(be.jsx)("li",{className:"page-main__rooms__item",children:Object(be.jsx)(se.b,{to:"/room-1",className:"page-main__rooms__button",type:"button",onClick:l,children:"\u0412 \u043a\u043e\u043c\u043d\u0430\u0442\u0443 1"})}),Object(be.jsx)("li",{className:"page-main__rooms__item",children:Object(be.jsx)(se.b,{to:"/room-2",className:"page-main__rooms__button",type:"button",onClick:l,children:"\u0412 \u043a\u043e\u043c\u043d\u0430\u0442\u0443 2"})}),"Bronepuh"===t.name&&Object(be.jsx)("li",{className:"page-main__rooms__item",children:Object(be.jsx)("button",{className:"page-main__button",type:"button",onClick:o,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"})})]})]}),Object(be.jsx)("section",{className:"page-main__promo promo",children:Object(be.jsx)("div",{className:"promo__picture",children:Object(be.jsx)("img",{src:"img/poker-table-bg.png",alt:"\u043f\u0440\u043e\u043c\u043e"})})})]})]}):Object(be.jsxs)("div",{className:"page-main",children:[Object(be.jsx)(Oe,{roomId:s,isMainPage:!0}),Object(be.jsx)("div",{className:"page-main__navigation navigation",children:Object(be.jsx)("div",{className:"navigation__panel",children:Object(be.jsxs)("div",{className:"navigation__info info",children:[Object(be.jsx)("p",{className:"info__name",children:"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a: \u041d\u0435\u043e\u043f\u043e\u0437\u043d\u0430\u043d\u043d\u044b\u0439 \u0415\u043d\u043e\u0442"}),Object(be.jsx)("p",{className:"info__statistic",children:"\u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u043e\u043d\u043b\u0430\u0439\u043d: ".concat(i)})]})})})]})},he=c(23),_e=c(22),Ne=(c(135),c(70)),fe=function(e){var t=e.login,c=e.email,s=e.password;return function(){var e=Object(re.a)(ie.a.mark((function e(n,a,i){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={login:t,email:c,password:s},console.log("api",t,c,s),e.prev=2,console.log("api",t,c,s),e.next=6,i.post("/api/auth/registration",Object(he.a)({},r),{headers:{"Content-Type":"application/json"}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,c,s){return e.apply(this,arguments)}}()},ye=function(e){var t=e.pageName,c=Object(a.useRef)(),s=(Object(ne.f)(),Object(a.useState)({login:"",email:"",password:""})),n=Object(_e.a)(s,2),i=n[0],r=n[1],l=Object(j.c)(le),o=Object(j.b)(),d=function(){r({login:"",email:"",password:""})},m=function(e){r(Object(he.a)(Object(he.a)({},i),{},Object(V.a)({},e.target.name,function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))}(e.target.value))))},u=function(){var e=Object(re.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(i),i.login.length){e.next=5;break}return c.current.textContent="\u043b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",c.current.style="color: #880000",e.abrupt("return",console.log("\u043d\u0435\u0442 \u043b\u043e\u0433\u0438\u043d\u0430!"));case 5:o(fe(i)),d();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){!function(){var e=document.querySelectorAll(".styled-input__placeholder-text"),t=document.querySelectorAll(".styled-input__input");if(e&&t){var c=function(e,t){var c=t?"add":"remove",s=e.querySelectorAll(".letter");s=[].slice.call(s,0),t||(s=s.reverse()),s.forEach((function(s,n){setTimeout((function(){var n=e.classList.contains("filled");t&&!n||!t&&n||s.classList[c]("active")}),50*n)}))};e.forEach((function(e,t){var c,s=e.innerText,n="",a=Object(Ne.a)(s);try{for(a.s();!(c=a.n()).done;){var i=c.value;s||(s="&nbsp;"),n+='<span class="letter">'.concat(i,"</span>")}}catch(r){a.e(r)}finally{a.f()}e.innerHTML=n})),t.forEach((function(e){var t=e.parentNode;e.addEventListener("focus",(function(){t.classList.add("filled"),c(t,!0)}),!1),e.addEventListener("blur",(function(){e.value.length||(t.classList.remove("filled"),c(t,!1))}),!1)})),setTimeout((function(){document.body.classList.add("on-start")}),100),setTimeout((function(){document.body.classList.add("document-loaded")}),1800)}}()}),[]),Object(be.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault()},children:[Object(be.jsx)("div",{className:"form__cover"}),Object(be.jsx)("div",{className:"form__loader",children:Object(be.jsx)("div",{className:"spinner active",children:Object(be.jsx)("svg",{className:"spinner__circular",viewBox:"25 25 50 50",children:Object(be.jsx)("circle",{className:"spinner__path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"4",strokeMiterlimit:"10"})})})}),Object(be.jsxs)("div",{className:"form__content",children:["reg"===t&&Object(be.jsx)("h1",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),"reg"!==t&&Object(be.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),"reg"===t&&Object(be.jsxs)("div",{className:"styled-input",children:[Object(be.jsx)("input",{type:"text",className:"styled-input__input",name:"login",min:"2",max:"15",onChange:m,value:i.value,required:!0}),Object(be.jsx)("div",{ref:c,className:"styled-input__placeholder",children:Object(be.jsx)("span",{className:"styled-input__placeholder-text",children:"\u041b\u043e\u0433\u0438\u043d"})}),Object(be.jsx)("div",{className:"styled-input__circle"})]}),Object(be.jsxs)("div",{className:"styled-input",children:[Object(be.jsx)("input",{type:"email",className:"styled-input__input",name:"email",onChange:m,value:i.value,required:!0}),Object(be.jsx)("div",{className:"styled-input__placeholder",children:Object(be.jsx)("span",{className:"styled-input__placeholder-text",children:"\u0412\u0430\u0448\u0430\xa0\u043f\u043e\u0447\u0442\u0430"})}),Object(be.jsx)("div",{className:"styled-input__circle"})]}),Object(be.jsxs)("div",{className:"styled-input",children:[Object(be.jsx)("input",{type:"password",className:"styled-input__input",name:"password",min:"2",max:"100",onChange:m,value:i.value,required:!0}),Object(be.jsx)("div",{className:"styled-input__placeholder",children:Object(be.jsx)("span",{className:"styled-input__placeholder-text",children:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(be.jsx)("div",{className:"styled-input__circle"})]}),"reg"===t&&Object(be.jsx)(se.b,{to:J,type:"button",className:"styled-button",onClick:u,children:Object(be.jsxs)("span",{className:"styled-button__real-text-holder",children:[Object(be.jsx)("span",{className:"styled-button__real-text",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(be.jsx)("span",{className:"styled-button__moving-block face",children:Object(be.jsx)("span",{className:"styled-button__text-holder",children:Object(be.jsx)("span",{className:"styled-button__text",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})}),Object(be.jsx)("span",{className:"styled-button__moving-block back",children:Object(be.jsx)("span",{className:"styled-button__text-holder",children:Object(be.jsx)("span",{className:"styled-button__text",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})})]})}),"auth"===t&&"AUTH"!==l&&Object(be.jsx)("button",{type:"button",className:"styled-button",onClick:function(){o(function(e){var t=e.login,c=e.email,s=e.password;return function(){var e=Object(re.a)(ie.a.mark((function e(n,a,i){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={login:t,email:c,password:s},e.prev=1,e.next=4,i.post("api/auth/login",Object(he.a)({},r),{headers:{"Content-Type":"application/json"}}).then((function(e){localStorage.setItem("userData",JSON.stringify({userLogin:e.data.userLogin,userId:e.data.userId,token:e.data.token}));var t=e.data;n(I(t))})).then((function(){n(k(A)),n(q(U)),window.location.reload()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,c,s){return e.apply(this,arguments)}}()}(i)),d()},children:Object(be.jsxs)("span",{className:"styled-button__real-text-holder",children:[Object(be.jsx)("span",{className:"styled-button__real-text",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(be.jsx)("span",{className:"styled-button__moving-block face",children:Object(be.jsx)("span",{className:"styled-button__text-holder",children:Object(be.jsx)("span",{className:"styled-button__text",children:"\u0412\u043e\u0439\u0442\u0438"})})}),Object(be.jsx)("span",{className:"styled-button__moving-block back",children:Object(be.jsx)("span",{className:"styled-button__text-holder",children:Object(be.jsx)("span",{className:"styled-button__text",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})})]})]})},ge=(c(136),function(){var e=Object(j.c)(le);return je(e)?Object(be.jsx)(xe,{}):Object(be.jsxs)("div",{className:"page-auth",children:[Object(be.jsx)(Oe,{}),Object(be.jsx)(ye,{pageName:"auth"})]})}),ke=(c(137),function(){return Object(be.jsxs)("div",{className:"page-reg",children:[Object(be.jsx)(Oe,{}),Object(be.jsx)(ye,{pageName:"reg"})]})}),Ee=(c(138),c(139),c(140),c(141),function(e){var t=e.item,c=Object(j.b)(),s=function(){c(M(t))},n=function(){};return t.isActive?Object(be.jsxs)("li",{className:"inventory__item inventory__item--active",tabIndex:"0",onFocus:s,onBlur:n,children:[Object(be.jsxs)("div",{className:"inventory__item-inner",children:[Object(be.jsx)("p",{className:"inventory__item-title",children:t.title}),Object(be.jsx)("img",{className:"inventory__item-picture",src:"img/underpants.png",alt:""})]}),Object(be.jsx)("div",{className:"inventory__item-cloth",children:Object(be.jsx)("img",{className:"inventory__item-cloth-picture",src:"img/underpants.png",alt:""})})]}):Object(be.jsxs)("li",{className:"inventory__item",tabIndex:"0",onFocus:s,onBlur:n,children:[Object(be.jsxs)("div",{className:"inventory__item-inner",children:[Object(be.jsx)("p",{className:"inventory__item-title",children:t.title}),Object(be.jsx)("img",{className:"inventory__item-picture",src:"img/underpants.png",alt:""})]}),Object(be.jsx)("div",{className:"inventory__item-cloth",children:Object(be.jsx)("img",{className:"inventory__item-cloth-picture",src:"img/underpants.png",alt:""})})]})}),Se=(c(142),function(e){var t=e.inventory;return Object(be.jsx)("ul",{className:"inventory__list",children:t.map((function(e,t){return Object(be.jsx)(Ee,{item:e},t)}))})}),Ie=(c(143),function(e){return e[ee].chosenItem}),we=(c(144),function(){return Object(be.jsxs)("div",{className:"inventory__promo-equipment equipment",children:[Object(be.jsx)("div",{className:"equipment__picture",children:Object(be.jsx)("img",{src:"img/siluet.png",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})}),Object(be.jsxs)("ul",{className:"equipment__list",children:[Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})}),Object(be.jsx)("li",{className:"equipment__item",children:Object(be.jsx)("div",{className:"equipment__item-inner"})})]})]})}),Ce=function(e){var t=e.user,c=e.getInventory,s=Object(j.c)(Ie),n=Object(j.b)(),a=function(){var e=Object(re.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s._id,e.prev=1,e.next=4,m.a.delete("/api/inventory/delete/".concat(t)).then((function(e){n(M({})),c()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(re.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s._id,e.prev=1,e.next=4,m.a.put("/api/inventory/active/".concat(t),{id:t}).then((function(e){console.log(e),n(M({})),c()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return s._id?Object(be.jsxs)("div",{className:"inventory__promo",children:[Object(be.jsxs)("div",{className:"inventory__promo-settings",children:[Object(be.jsx)("p",{className:"inventory__promo-title",children:s.title}),Object(be.jsx)("p",{className:"inventory__promo-description",children:s.description}),Object(be.jsx)("ul",{className:"inventory__promo-list",children:s.power.map((function(e,t){var c=Object.keys(e)[0];return Object(be.jsxs)("li",{className:"inventory__promo-item",children:[c,Object(be.jsx)("span",{className:"inventory__promo-power",children:"+ ".concat(e[c])})]},t)}))}),Object(be.jsx)("button",{className:"inventory__promo-delete",onClick:a,children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(be.jsx)("button",{className:"inventory__promo-put-on",onClick:i,children:"".concat(s.isActive?"\u0441\u043d\u044f\u0442\u044c":"\u043e\u0434\u0435\u0442\u044c")})]}),Object(be.jsx)(we,{})]}):Object(be.jsxs)("div",{className:"inventory__promo",children:[Object(be.jsx)("div",{className:"inventory__promo-settings",children:Object(be.jsx)("p",{className:"inventory__promo-title",children:t.name})}),Object(be.jsx)(we,{})]})},Re=function(e){var t=e.user,c=W,s=Object(a.useState)([]),n=Object(_e.a)(s,2),i=n[0],r=n[1],l=Object(j.b)(),o=t.id,d=Object(j.c)(pe);console.log("\u041a\u043e\u043c\u043d\u0430\u0442\u044b \u0438\u0437 \u0421\u0442\u043e\u0440\u0430: ",d);var u={owner:o,title:"\u043a\u0440\u0430\u0441\u043d\u044b\u0435 \u0442\u0440\u0443\u0441\u0435\u043b\u044f",description:"\u042d\u0442\u0438 \u043b\u0435\u0433\u0435\u043d\u0434\u0430\u043e\u043d\u044b\u0435 \u0442\u0440\u0443\u0441\u0435\u043b\u044f \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0435\u0437\u0430\u043c\u0435\u043d\u0438\u043c\u044b\u043c \u0442\u0430\u043b\u0438\u0441\u043c\u0430\u043d\u043e\u043c \u0443\u0434\u0430\u0447\u043b\u0438\u0432\u043e\u0433\u043e \u0438\u0433\u0440\u043e\u043a\u0430. \u0414\u0430\u043d\u043d\u044b\u0439 \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0438\u0433\u0440\u044b \u0438 \u043e\u0447\u0435\u043d\u044c \u0441\u0438\u043b\u044c\u043d\u043e \u043f\u0440\u0438\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0432\u043e\u0435\u043c\u0443 \u0445\u043e\u0437\u044f\u0438\u043d\u0443. \u0411\u0435\u0440\u0435\u0433\u0438\u0442\u0435 \u0435\u0433\u043e \u0438 \u043e\u043d \u043e\u0442\u043f\u043b\u0430\u0442\u0438\u0442 \u0412\u0430\u043c, \u043f\u0440\u0438\u043d\u0435\u0441\u044f \u0443\u0434\u0430\u0447\u0443 (\u043d\u043e \u044d\u0442\u043e \u043d\u0435\u0442\u043e\u0447\u043d\u043e)",power:[{luck:3},{charm:1}],img:"img/underpants",isActive:!1},b=Object(a.useCallback)((function(){ue.emit("ROOM:RELOCATION",{user:t,roomId:c})}),[c,t]);Object(a.useEffect)((function(){t.id&&(ue.emit("ROOM:JOIN",{user:t,roomId:c}),ue.emit("GET_ROOMS"))}),[t.id,c,t]),Object(a.useEffect)((function(){t.id&&ue.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&ue.on("SEND_NEW_ROOMS",(function(e){console.log("\u043f\u0440\u0438\u0448\u043b\u043e \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442",e),l(C(e))}))}),[t.id,l]),Object(a.useEffect)((function(){t.id&&ue.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]);var O=Object(a.useCallback)(Object(re.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/inventory",{params:o}).then((function(e){var t=e.data;l(w(t)),r(t)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[l,o]);Object(a.useEffect)((function(){O()}),[O]);var x=function(){var e=Object(re.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/inventory/add",{item:u,id:o}).then((function(){O()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return t?Object(be.jsxs)("div",{className:"page-user",children:[Object(be.jsxs)("div",{className:"navbar",children:[Object(be.jsx)("div",{className:"navbar__user-name",children:t.name}),Object(be.jsx)(se.b,{to:U,className:"user__logo",onClick:b,children:"Pokerman"})]}),Object(be.jsx)("h2",{className:"page-reg__title",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(be.jsxs)("div",{className:"page-user__inventory inventory",children:[Object(be.jsx)(Se,{inventory:i}),Object(be.jsx)(Ce,{user:t,getInventory:O})]}),Object(be.jsx)("button",{type:"button",className:"page-user__get-underpants",onClick:x,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0443\u0441\u044b"}),Object(be.jsx)("button",{type:"button",className:"page-user__get-underpants",onClick:O,children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0440\u0443\u0441\u044b"})]}):Object(be.jsx)(xe,{})},qe=(c(145),function(e){var t=e.user;return t?Object(be.jsx)("li",{className:"connection__item",children:t.name}):null}),Me=(c(146),function(e){var t=e.room;return t?Object(be.jsxs)("section",{className:"page-room__connection connection",children:[Object(be.jsx)("h2",{className:"connection__title",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435:"}),Object(be.jsx)("ul",{className:"connection__list",children:t.online_users.map((function(e){return Object(be.jsx)(qe,{user:e},e.id)}))})]}):Object(be.jsxs)("section",{className:"page-room__connection connection",children:[Object(be.jsx)("h2",{className:"connection__title",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435:"}),Object(be.jsx)("ul",{className:"connection__list",children:Object(be.jsx)(qe,{})})]})}),Ae=(c(147),c(148),function(e){var t=e.user,c=e.roomId,s=Object(a.useState)({}),n=Object(_e.a)(s,2),i=n[0],r=n[1];i[0]&&console.log(i);Object(a.useEffect)((function(){t.id&&ue.emit("GET_MESSAGES",c)}),[t,c]),ue.on("MESSAGE_CREATED",(function(e){r(e)}));return Object(be.jsxs)("section",{className:"chat",children:[Object(be.jsx)("h3",{className:"chat__title",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: "}),Object(be.jsx)("div",{className:"chat__list-wrapper",children:Object(be.jsx)("ul",{className:"chat__list",children:i.length>0&&i.map((function(e,t){return Object(be.jsxs)("li",{className:"chat__item",children:[Object(be.jsx)("div",{className:"chat__avatar",children:e.author}),Object(be.jsx)("div",{className:"chat__message",children:Object(be.jsx)("p",{className:"chat__text",children:e.msg})})]},t)}))})}),Object(be.jsxs)("form",{className:"chat__form",onSubmit:function(e){e.preventDefault(),t.id&&ue.emit("SEND_MESSAGE",{roomId:c,author:t.name,msg:e.target[0].value})},children:[Object(be.jsx)("textarea",{className:"chat__textarea",type:"text"}),Object(be.jsx)("button",{className:"chat__btn",type:"submit",children:"ok"})]}),Object(be.jsx)("button",{className:"chat__message",onClick:function(){ue.emit("CLEAR_MSG",c),r([]),ue.emit("GET_MESSAGES",c)},children:"clear messages"})]})}),Te=function(e){var t=e.user,c=e.roomId,s=Object(j.c)(pe);console.log("\u041a\u043e\u043c\u043d\u0430\u0442\u044b \u0438\u0437 \u0421\u0442\u043e\u0440\u0430: ",s);var n=null;s.length&&(n=s.find((function(e){return e.room_id===c})));var i=Object(j.b)();return Object(a.useEffect)((function(){t.id&&(ue.emit("ROOM:JOIN",{user:t,roomId:c}),ue.emit("GET_ROOMS"))}),[t.id,c,t]),Object(a.useEffect)((function(){t.id&&ue.once("ROOM:USER_JOINED")}),[t.id]),Object(a.useEffect)((function(){t.id&&ue.on("SEND_NEW_ROOMS",(function(e){console.log("\u043f\u0440\u0438\u0448\u043b\u043e \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442",e),i(C(e))}))}),[t.id,i]),Object(a.useEffect)((function(){t.id&&ue.once("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e")}))}),[t.id]),Object(be.jsxs)("div",{className:"page-room",children:[Object(be.jsx)(Oe,{user:t,roomId:c}),Object(be.jsxs)("div",{className:"page-room__inner",children:[Object(be.jsx)(Ae,{user:t,roomId:c}),Object(be.jsx)(Me,{room:n})]})]})},Le=c(71),Ue=Object(Le.a)();ue.on("connect",(function(){ue.connected&&console.log("\u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f")}));var De,Je=function(){var e=Object(j.c)(le),t=Object(j.c)(oe);ue.on("disconnect",(function(){console.log("\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043e\u0440\u0432\u0430\u043d\u043e"),ue.emit("ROOM:USER_OUT",t)}));var c=Object(j.b)();return""===t.location&&c(S(U)),je(e)?Object(be.jsx)(xe,{}):Object(be.jsx)(se.a,{history:Ue,children:Object(be.jsxs)(ne.c,{children:[Object(be.jsx)(ne.a,{exact:!0,path:U,children:Object(be.jsx)(ve,{user:t})}),Object(be.jsx)(ne.a,{exact:!0,path:D,children:Object(be.jsx)(ke,{})}),Object(be.jsx)(ne.a,{exact:!0,path:J,children:Object(be.jsx)(ge,{})}),Object(be.jsx)(ne.a,{exact:!0,path:G,children:Object(be.jsx)(Re,{user:t})}),Object(be.jsx)(ne.a,{exact:!0,path:B,children:Object(be.jsx)(Te,{user:t,roomId:P})}),Object(be.jsx)(ne.a,{exact:!0,path:z,children:Object(be.jsx)(Te,{user:t,roomId:F})})]})})},Ge=function(e){return function(e){return function(t){return t.type===v&&Ue.push(t.payload),e(t)}}},Be=(c(149),O((function(){return ze.dispatch(k(T))}))),ze=Object(o.a)({reducer:ce,middleware:function(e){return e({thunk:{extraArgument:Be}}).concat(Ge)}}),He=localStorage.getItem("userData");ze.dispatch((De=He,function(e,t,c){return c.post("api/auth/check").then((function(t){if(De){var s=JSON.parse(De).userId;e(k(t.data)),c.get("api/user/item",{params:s}).then((function(t){var c=t.data;e(I(c))})).catch((function(e){console.log(e)}))}else e(k("NO_AUTH"))})).catch((function(e){console.log(e)}))})),l.a.render(Object(be.jsx)(i.a.StrictMode,{children:Object(be.jsx)(j.a,{store:ze,children:Object(be.jsx)(Je,{store:ze})})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.dcc1ccbc.chunk.js.map